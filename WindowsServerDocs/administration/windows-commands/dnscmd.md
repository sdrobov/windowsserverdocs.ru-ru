---
title: dnscmd
description: Справочная статья по команде dnscmd, которая является интерфейсом командной строки для управления DNS-серверами.
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: e7f31cb5-a426-4e25-b714-88712b8defd5
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 47be29e55c4626f5c05498074f10418730c6a6f3
ms.sourcegitcommit: 2afed2461574a3f53f84fc9ec28d86df3b335685
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "85931299"
---
# <a name="dnscmd"></a>Dnscmd

> Область применения: Windows Server (половина ежегодного канала), Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Интерфейс командной строки для управления DNS-серверами. Эта служебная программа полезна в пакетных файлах сценариев для автоматизации подпрограмм задач управления DNS, а также для выполнения простой автоматической установки и настройки новых DNS-серверов в сети.

## <a name="syntax"></a>Синтаксис

```
dnscmd <servername> <command> [<command parameters>]
```

### <a name="parameters"></a>Параметры

| Параметр | Описание: |
| --------- | ----------- |
| `<servername>` | IP-адрес или имя узла удаленного или локального DNS-сервера. |

## <a name="dnscmd-ageallrecords-command"></a>dnscmd/ажеаллрекордс, команда

Устанавливает текущее время отметки времени для записей ресурсов в указанной зоне или узле на DNS-сервере.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /ageallrecords <zonename>[<nodename>] | [/tree]|[/f]
```

#### <a name="parameters"></a>Параметры

| Параметр | Описание: |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер, которым администратор планирует управлять, представленный IP-адресом, полным доменным именем или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает полное доменное имя зоны. |
| `<nodename>` | Указывает конкретный узел или поддерево в зоне, используя следующие команды:<ul><li>**@** для корневой зоны или полного доменного имени</li><li>Полное доменное имя узла (с точкой (.) в конце)</li><li>Отдельная метка для имени относительно корня зоны.</li></ul> |
| /три | Указывает, что все дочерние узлы также получают метку времени. |
| /f | Выполняет команду без запроса подтверждения. |

##### <a name="remarks"></a>Комментарии

- Команда **ажеаллрекордс** предназначена для обеспечения обратной совместимости между текущей версией DNS и предыдущими выпусками DNS, в которых устаревание и очистка не поддерживались. Он добавляет отметку времени с текущим временем к записям ресурсов, не имеющим отметки времени, и устанавливает текущее время для записей ресурсов, у которых есть метка времени.

- Очистка записей не выполняется, если только записи не имеют отметки времени. Записи ресурсов сервера имен (NS), записи ресурсов SOA и записи ресурсов службы Windows Internet Name Service (WINS) не включаются в процесс очистки и не имеют отметки времени даже при выполнении команды **ажеаллрекордс** .

- Эта команда завершается сбоем, если для DNS-сервера и зоны не включена очистка. Сведения о включении очистки для зоны см. в описании параметра **старения** в синтаксисе `dnscmd /config` команды в этой статье.

- Добавление метки времени к записям ресурсов DNS делает их несовместимыми с DNS-серверами, работающими в операционных системах, отличных от Windows Server. Отметка времени, добавленная с помощью команды **ажеаллрекордс** , не может быть отменена.

- Если ни один из необязательных параметров не указан, команда возвращает все записи ресурсов на указанном узле. Если задано значение хотя бы для одного из необязательных параметров, **dnscmd** перечисляет только те записи ресурсов, которые соответствуют значению или значениям, указанным в необязательных параметрах или аргументах.

### <a name="examples"></a>Примеры

[Пример 1. Установка текущего времени в отметке времени для записей ресурсов](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc784399(v=ws.10)#example-1-set-the-current-time-on-a-time-stamp-to-resource-records)

## <a name="dnscmd-clearcache-command"></a>dnscmd/ClearCache, команда

Очистка памяти кэша DNS для записей ресурсов на указанном DNS-сервере.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /clearcache
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |

### <a name="example"></a>Пример

```
dnscmd dnssvr1.contoso.com /clearcache
```

## <a name="dnscmd-config-command"></a>dnscmd/config, команда

Изменяет значения в реестре для DNS-сервера и отдельных зон. Эта команда также изменяет конфигурацию указанного сервера. Принимает параметры уровня сервера и зоны.

> [!CAUTION]
> Не изменяйте реестр напрямую, если нет альтернативы. Редактор реестра обходит стандартные средства защиты, что позволяет снизить производительность, повредить систему или даже потребовать переустановки Windows. Большинство параметров реестра можно безопасно изменить с помощью программы на панели управления или консоли управления (MMC). Если необходимо непосредственно изменить реестр, сначала создайте его резервную копию. Дополнительные сведения см. в справке редактора реестра.

### <a name="server-level-syntax"></a>Синтаксис уровня сервера

```
dnscmd [<servername>] /config <parameter>
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер, которым планируется управлять, представленный синтаксисом локального компьютера, IP-адресом, полным доменным именем или узлом. Если этот параметр пропущен, используется локальный сервер. |
| `<parameter>` | Укажите параметр и в качестве значения параметра. В значениях параметров используется следующий синтаксис: *Parameter* [*значение*]. |
| /аддрессансверлимит`[0|5-28]` | Указывает максимальное количество записей узла, которые DNS-сервер может отправить в ответ на запрос. Значение может быть равно нулю (0) или находиться в диапазоне от 5 до 28 записей. Значение по умолчанию равно нулю (0). |
| /биндсекондариес`[0|1]` | Изменяет формат зонной смены таким образом, чтобы он мог обеспечить максимальную степень сжатия и эффективность. Принимает значения:<ul><li>**0** — использует максимальное сжатие и совместимо с версиями BIND 4.9.4 и более поздних версий.</li><li>**1** — Отправка только одной записи ресурса для каждого сообщения на DNS-серверы, отличные от Майкрософт и совместимая с версиями BIND, предшествующими 4.9.4. Это параметр по умолчанию.</li></ul> |
| /бутмесод`[0|1|2|3]` | Определяет источник, из которого DNS-сервер получает сведения о конфигурации. Принимает значения:<ul><li>**0** — очищает источник сведений о конфигурации.</li><li>**1** — загружается из файла привязки, расположенного в каталоге DNS, который `%systemroot%\System32\DNS` по умолчанию имеет значение.</li><li>**2** — загружается из реестра.</li><li>**3** — загружается из AD DS и реестра. Это параметр по умолчанию.</li></ul> |
| /дефаултагингстате`[0|1]` | Определяет, включена ли функция очистки DNS по умолчанию для вновь созданных зон. Принимает значения:<ul><li>**0** — отключение очистки. Это параметр по умолчанию.</li><li>**1** — включает очистку.</li></ul> |
| /дефаултнорефрешинтервал`[0x1-0xFFFFFFFF|0xA8]` | Задает период времени, в течение которого обновления не принимаются для динамически обновляемых записей. Зоны на сервере наследуют это значение автоматически.<p>Чтобы изменить значение по умолчанию, введите значение в диапазоне **0x1-0xFFFFFFFF**. Значение по умолчанию для сервера — **0xA8**. |
| /дефаултрефрешинтервал`[0x1-0xFFFFFFFF|0xA8]` | Задает период времени, который разрешен для динамических обновлений записей DNS. Зоны на сервере наследуют это значение автоматически.<p>Чтобы изменить значение по умолчанию, введите значение в диапазоне **0x1-0xFFFFFFFF**. Значение по умолчанию для сервера — **0xA8**. |
| /дисаблеаутореверсезонес`[0|1]` | Включает или отключает автоматическое создание зон обратного просмотра. Зоны обратного просмотра обеспечивают разрешение IP-адресов в доменные имена DNS. Принимает значения:<ul><li>**0** — включает автоматическое создание зон обратного просмотра. Это параметр по умолчанию.</li><li>**1** — отключает автоматическое создание зон обратного просмотра.</li></ul> |
| /дисабленсрекордсаутокреатион`[0|1]` | Указывает, будет ли DNS-сервер автоматически создавать записи ресурсов сервера имен (NS) для зон, которые она содержит. Принимает значения:<ul><li>**0** — автоматически создает записи ресурсов сервера имен (NS) для зон, размещаемых на DNS-сервере.</li><li>**1** — не создает автоматически записи ресурсов сервера имен (NS) для зон, РАЗМЕЩАЕМЫХ DNS-сервером.</li></ul> |
| /дсполлингинтервал`[0-30]` | Указывает, как часто DNS-сервер опрашивает AD DS на предмет изменений в зонах, интегрированных с Active Directory. |
| /дстомбстонеинтервал`[1-30]` |Время в секундах, в течение которого необходимо хранить удаленные записи в AD DS. |
| /еднскачетимеаут`[3600-15724800]` | Указывает количество секунд, в течение которых кэшируются данные расширенной DNS (EDNS). Минимальное значение — **3600**, а максимальное значение — **15 724 800**. Значение по умолчанию — **604 800** секунд (одна неделя). |
| /енаблиднспробес`[0|1]` | Включает или отключает сервер для проверки других серверов на наличие поддержки EDNS. Принимает значения:<ul><li>**0** — отключает активную поддержку проверок EDNS.</li><li>**1** — включает активную поддержку проверок EDNS.</li></ul> |
| /енабледнссек`[0|1]` | Включает или отключает поддержку расширений безопасности DNS (DNSSEC). Принимает значения:<ul><li>**0** — отключение DNSSEC.</li><li>**1** — включает DNSSEC.</li></ul> |
| /енаблеглобалнамессуппорт`[0|1]` | Включает или отключает поддержку зоны GlobalNames. Зона GlobalNames поддерживает разрешение имен DNS с одной меткой в пределах леса. Принимает значения:<ul><li>**0** — отключает поддержку для зоны GlobalNames. Если присвоить этой команде значение 0, служба DNS-сервера не будет разрешать однокомпонентные имена в зоне GlobalNames.</li><li>**1** — включает поддержку для зоны GlobalNames. Если для этой команды задано значение 1, служба DNS-сервера разрешает однокомпонентные имена в зоне GlobalNames.</li></ul> |
| /енаблеглобалкуериблокклист`[0|1]` | Включает или отключает поддержку глобального списка блокировок запросов, который блокирует разрешение имен для имен в списке. Служба DNS-сервера создает и включает глобальный список блокировок запросов по умолчанию при первой загрузке службы. Чтобы просмотреть текущий глобальный список блокировок запросов, используйте команду dnscmd/info **/глобалкуериблокклист** . Принимает значения:<ul><li>**0** — отключает поддержку глобального списка блокировок запросов. Если задать для этой команды значение 0, служба DNS-сервера будет отвечать на запросы имен в списке блокировок.</li><li>**1** — включает поддержку для глобального списка блокировок запросов. Если для этой команды задать значение 1, служба DNS-сервера не будет отвечать на запросы имен в списке блокировок.</li></ul> |
| /евентлоглевел`[0|1|2|4]` | Определяет, какие события регистрируются в журнале DNS-сервера в Просмотр событий. Принимает значения:<ul><li>**0** — не ведет журнал событий.</li><li>**1** — записывает только ошибки.</li><li>**2** — записывает только ошибки и предупреждения.</li><li>**4** — записываются ошибки, предупреждения и информационные события. Это параметр по умолчанию.</li></ul> |
| /форвардделегатионс`[0|1]` | Определяет, как DNS-сервер обрабатывает запрос для делегированной подзоны. Эти запросы можно отправить в подзону, на которую ссылается запрос, или в список серверов пересылки, названных для DNS-сервера. Записи в параметре используются только при включенной пересылке. Принимает значения:<ul><li>**0** — автоматически отправляет запросы, ссылающиеся на делегированные подзоны, в соответствующую подзону. Это параметр по умолчанию.</li><li>**1** — перенаправляет запросы, ссылающиеся на делегированную подзону, на существующие серверы пересылки.</li></ul> |
| /форвардингтимеаут`[<seconds>]` | Определяет, сколько секунд (**0x1-0xFFFFFFFF**) DNS-сервер ожидает ответа сервера пересылки, прежде чем пытаться выполнить другой сервер пересылки. Значение по умолчанию — **0x5**, то есть 5 секунд. |
| /глобалнеамескуерйордер`[0|1]` | Указывает, будет ли служба DNS-сервера сначала выглядеть в зоне GlobalNames или в локальных зонах при разрешении имен. Принимает значения:<ul><li>**0** — служба DNS-сервера пытается разрешить имена, запрашивая зону GlobalNames перед запросом к зонам, для которых она является полномочной.</li><li>**1** . Служба DNS-сервера пытается разрешить имена, запросив зоны, для которых он является полномочным, перед запросом к зоне глобальных имен.</li></ul> |
| /глобалкуериблокклист`[[<name> [<name>]...]` | Заменяет текущий глобальный список блокировок запросов на список указанных имен. Если имена не указаны, эта команда очищает список блокировок. По умолчанию глобальный список блокировок запросов содержит следующие элементы.<ul><li>связи</li><li>WPAD</li></ul>Служба DNS-сервера может удалить одно или оба этих имени при первом запуске, если оно найдет эти имена в существующей зоне. |
| /исславе`[0|1]` | Определяет, как DNS-сервер отвечает, когда пересылаемые запросы не получают ответа. Принимает значения:<ul><li>**0** — указывает, что DNS-сервер не является подчиненным. Если сервер пересылки не отвечает, он пытается разрешить сам запрос. Это параметр по умолчанию.</li><li>**1** — указывает, что DNS-сервер является подчиненным. Если сервер пересылки не отвечает, DNS завершает Поиск и отправляет арбитру сообщение об ошибке.</li></ul> |
| /локалнетприорити`[0|1]` | Определяет порядок, в котором записи узла возвращаются, если DNS-сервер имеет несколько записей узлов для одного и того же имени. Принимает значения:<ul><li>**0** — возвращает записи в том порядке, в котором они указаны в базе данных DNS.</li><li>**1** — возвращает записи с ПОХОЖИМИ IP-адресами в первую очередь. Это параметр по умолчанию.</li></ul> |
| /логфилемакссизе`[<size>]` | Задает максимальный размер в байтах (**0x10000-0xFFFFFFFF**) файла DNS. log. Когда файл достигает максимального размера, DNS перезаписывает самые старые события. Размер по умолчанию — **0x400000**, то есть 4 мегабайта (МБ). |
| /logFilePath`[<path+logfilename>]` | Указывает путь к файлу DNS. log. По умолчанию используется путь `%systemroot%\System32\Dns\Dns.log`. Можно указать другой путь, используя формат `path+logfilename` . |
| /логипфилтерлист`<IPaddress> [,<IPaddress>...]` | Указывает, какие пакеты регистрируются в файле журнала отладки. Записи представляют собой список IP-адресов. В журнал записываются только пакеты, отправляемые с IP-адресов в списке и из них. |
| /логлевел`[<eventtype>]` | Определяет, какие типы событий записываются в файл DNS. log. Каждый тип события представлен шестнадцатеричным числом. Если в журнале должно быть несколько событий, используйте Добавление шестнадцатеричных значений, а затем введите сумму. Принимает значения:<ul><li>**0x0** — DNS-сервер не создает журнал. Это запись по умолчанию.</li><li>**0x10** — записывает в журнал запросы и уведомления.</li><li>**0x20** — журналы обновлений.</li><li>**0xFE** — записывает в журнал транзакции, не являющиеся запросами.</li><li>**0x100** — записывает в журнал транзакции вопросов.</li><li>**0x200** — журналы ответов.</li><li>**0x1000** — журналы отправки пакетов.</li><li>**0x2000** — журналы получения пакетов.</li><li>**0x4000** — записывает UDP-пакеты.</li><li>**0x8000** — записывает в журнал пакеты протокола управления передачей (TCP).</li><li>**0xFFFF** — записывает все пакеты.</li><li>**0x10000** — записывает в журнал транзакции записи в Active Directory.</li><li>**0x20000** — записывает в журнал транзакции обновления Active Directory.</li><li>**0x1000000** — записывает полные пакеты.</li><li>**0x80000000** — записывает транзакции с записью в журнал.</li><li></ul> |
| /макскачесизе | Указывает максимальный размер кэша памяти DNS-сервера (в килобайтах (КБ)). |
| /макскачеттл`[<seconds>]` | Определяет, сколько секунд (**0x0 – 0xFFFFFFFF**) сохраняется запись в кэше. Если используется параметр **0x0** , DNS-сервер не кэширует записи. Значение по умолчанию — **0x15180** (86 400 секунд или 1 день). |
| /макснегативекачеттл`[<seconds>]` | Указывает, сколько секунд (**0x1 – 0xFFFFFFFF**) запись, которая записывает отрицательный ответ на запрос, сохраняется в кэше DNS. Значение по умолчанию — **0x384** (900 секунд). |
| /намечеккфлаг`[0|1|2|3]` | Указывает, какой стандарт символов используется при проверке DNS-имен. Принимает значения:<ul><li>**0** — использует символы ANSI, соответствующие запросу IETF (Internet Engineering Task Force) (RFC).</li><li>**1** — использует символы ANSI, которые не обязательно соответствуют стандарту RFC IETF.</li><li>**2** — использует многобайтовый формат преобразования UCS 8 (UTF-8) символов. Это параметр по умолчанию.</li><li>**3** — использует все символы.</li></ul> |
| /норекурсион`[0|1]` | Определяет, выполняет ли DNS-сервер разрешение рекурсивных имен. Принимает значения:<ul><li>**0** — DNS-сервер выполняет рекурсивное разрешение имен, если оно запрашивается в запросе. Это параметр по умолчанию.</li><li>**1** — DNS-сервер не выполняет рекурсивное разрешение имен.</li></ul> |
| /ноткп | Этот параметр устарел и не влияет на текущие версии Windows Server. |
| /рекурсионретри`[<seconds>]` | Определяет число секунд (**0x1-0xFFFFFFFF**), в течение которых DNS-сервер ожидает перед попыткой связаться с удаленным сервером. Значение по умолчанию — **0x3** (три секунды). Это значение должно быть увеличено при возникновении рекурсии по медленной ссылке на глобальную сеть (WAN). |
| /рекурсионтимеаут`[<seconds>]` | Определяет число секунд (**0x1-0xFFFFFFFF**), которое DNS-сервер ожидает перед прекращением попытки подключения к удаленному серверу. Параметры находятся в диапазоне от **0x1** до **0xFFFFFFFF**. Значение по умолчанию — **0xF** (15 секунд). Это значение следует увеличивать, если рекурсия происходит по медленному каналу глобальной сети. |
| /раундробин`[0|1]` | Определяет порядок, в котором записи узла возвращаются, если сервер имеет несколько записей узла для одного и того же имени. Принимает значения:<ul><li>**0** — DNS-сервер не использует циклический перебор. Вместо этого он возвращает первую запись в каждый запрос.</li><li>**1** . DNS-сервер поворачивает возвращенные записи из верхней части в конец списка соответствующих записей. Это параметр по умолчанию.</li></ul> |
| /рпкпротокол`[0x0|0x1|0x2|0x4|0xFFFFFFFF]` | Указывает протокол, используемый удаленным вызовом процедур (RPC) при подключении с DNS-сервера. Принимает значения:<ul><li>**0x0** — отключение RPC для DNS.</li><li>**0x01** — использует TCP/IP</li><li>**0x2** — использует именованные каналы.</li><li>**0x4** — использует вызов локальной процедуры (LPC).</li><li>**0xFFFFFFFF** — все протоколы. Это параметр по умолчанию.</li></ul> |
| /скавенгингинтервал`[<hours>]` | Определяет, включен ли компонент очистки для DNS-сервера, и задает количество часов (**0x0 – 0xFFFFFFFF**) между циклами очистки. Значение по умолчанию — **0x0**, что отключает очистку DNS-сервера. Параметр больше **0x0** включает очистку для сервера и задает количество часов между циклами очистки. |
| /секуререспонсес`[0|1]` | Определяет, будут ли DNS-фильтры сохранять записи, сохраненные в кэше. Принимает значения:<ul><li>**0** — сохраняет все ответы на запросы имен в кэше. Это параметр по умолчанию.</li><li>**1** — сохраняет только записи, относящиеся к одному поддереву DNS, в кэш.</li></ul> |
| /сендпорт`[<port>]` | Указывает номер порта (**0x0 – 0xFFFFFFFF**), который DNS использует для отправки рекурсивных запросов на другие DNS-серверы. Значение по умолчанию — **0x0**, то есть номер порта выбирается случайным образом. |
| /серверлевелплугиндлл`[<dllpath>]` | Указывает путь к пользовательскому подключаемому модулю. Если Dllpath указывает полный путь к допустимому подключаемому модулю DNS-сервера, DNS-сервер вызывает функции в подключаемом модуле для разрешения запросов имен, находящихся за пределами области всех локально размещенных зон. Если запрашиваемое имя выходит за пределы области действия подключаемого модуля, DNS-сервер выполняет разрешение имен с помощью перенаправления или рекурсии, как настроено. Если параметр Dllpath не указан, DNS-сервер прекращает использовать пользовательский подключаемый модуль, если пользовательский подключаемый модуль был настроен ранее. |
| /стриктфилепарсинг`[0|1]` | Определяет поведение DNS-сервера при обнаружении ошибочной записи при загрузке зоны. Принимает значения:<ul><li>**0** — DNS-сервер продолжит загружать зону, даже если сервер встречает ошибочную запись. Эта ошибка записывается в журнал DNS. Это параметр по умолчанию.</li><li>**1** — DNS-сервер останавливает загрузку зоны и регистрирует ошибку в журнале DNS.</li></ul> |
| /упдатеоптионс`<RecordValue>` | Запрещает динамическое обновление указанных типов записей. Если требуется, чтобы в журнале было запрещено несколько типов записей, используйте Добавление шестнадцатеричных значений, а затем введите сумму. Принимает значения:<ul><li>**0x0** — не ограничивает типы записей.</li><li>**0x1** — исключение записей ресурсов начальной записи зоны (SOA).</li><li>**0x2** — исключает записи ресурсов сервера имен (NS).</li><li>**0x4** — исключает делегирование записей ресурсов сервера имен (NS).</li><li>**0x8** — исключение записей узла сервера.</li><li>**0x100** — во время безопасного динамического обновления в исключении записей ресурсов начальной записи (SOA).</li><li>**0x200** — во время безопасного динамического обновления исключаются записи ресурсов сервера корневого имени (NS).</li><li>**0x30F** — во время стандартного динамического обновления исключает записи ресурсов сервера имен (NS), записи ресурсов SOA и записи узла сервера. Во время безопасного динамического обновления исключаются записи ресурсов сервера корневого имени (NS) и записи ресурсов записей зоны (SOA). Разрешает делегирование и обновление узла сервера.</li><li>**0x400** — во время безопасного динамического обновления исключает записи ресурсов сервера имен делегирования (NS).</li><li>**0x800** — во время безопасного динамического обновления исключает записи узла сервера.</li><li>**0x1000000** — исключает записи подписывания делегирования (DS).</li><li>**0x80000000** — отключение динамического обновления DNS.</li></ul> |
| /вритеаусоритинс`[0|1]` | Определяет, когда DNS-сервер записывает записи ресурсов сервера имен (NS) в разделе центра ответа. Принимает значения:<ul><li>**0** — запись записей ресурсов сервера имен (NS) в разделе "центр" только для ссылок. Этот параметр соответствует стандартам RFC 1034, доменным именам и средствам, а также RFC 2181, уточнения спецификаций DNS. Это параметр по умолчанию.</li><li>**1** — запись записей ресурсов сервера имен (NS) в разделе "центр" всех успешных полномочных ответов.</li></ul> |
| /ксфрконнекттимеаут`[<seconds>]` | Определяет количество секунд (**0x0 – 0xFFFFFFFF**), в течение которых основной DNS-сервер ожидает ответа на пересылку со своего вторичного сервера. Значение по умолчанию — **0x1E** (30 секунд). По истечении времени ожидания соединение завершается. |

### <a name="zone-level-syntax"></a>Синтаксис на уровне зоны

Изменяет конфигурацию указанной зоны. Имя зоны должно быть указано только для параметров уровня зоны.

```
dnscmd /config <parameters>
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<parameter>` | Укажите параметр, имя зоны и, как вариант, значение. В значениях параметров используется следующий синтаксис: `zonename parameter [value]` . |
| /агинг`<zonename>`| Включает или отключает очистку в определенной зоне. |
| /алловнсрекордсаутокреатион `<zonename>``[value]` | Переопределяет параметр автосоздания записи ресурса сервера доменных имен (NS) DNS-сервера. Записи ресурсов сервера имен (NS), которые ранее были зарегистрированы для этой зоны, не затрагиваются. Поэтому их необходимо удалить вручную, если они не нужны. |
| /алловупдате`<zonename>` | Определяет, принимает ли указанная зона динамические обновления. |
| /форвардерславе`<zonename>` | Переопределяет параметр **/исславе** DNS-сервера. |
| /форвардертимеаут`<zonename>` | Определяет, сколько секунд зона DNS ожидает ответа сервера пересылки, прежде чем пытаться выполнить другой сервер пересылки. Это значение переопределяет значение, заданное на уровне сервера. |
| /норефрешинтервал`<zonename>` | Задает интервал времени для зоны, в течение которого никакие обновления не могут динамически обновлять записи DNS в указанной зоне. |
| /рефрешинтервал`<zonename>` | Задает интервал времени для зоны, в течение которого обновления могут динамически обновлять записи DNS в указанной зоне. |
| /секуресекондариес`<zonename>` | Определяет, какие серверы-получатели могут получить обновления зоны с главного сервера для этой зоны. |

## <a name="dnscmd-createbuiltindirectorypartitions-command"></a>dnscmd/креатебуилтиндиректорипартитионс, команда

Создает раздел каталога приложений DNS. При установке DNS раздел каталога приложений для службы создается на уровне леса и домена. Эта команда используется для создания разделов каталога приложений DNS, которые были удалены или никогда не были созданы. Если параметр не задан, эта команда создает встроенный раздел каталога DNS для домена.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /createbuiltindirectorypartitions [/forest] [/alldomains]
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| /Forest | Создает раздел каталога DNS для леса. |
| /аллдомаинс | Создает разделы DNS для всех доменов в лесу. |

## <a name="dnscmd-createdirectorypartition-command"></a>dnscmd/креатедиректорипартитион, команда

Создает раздел каталога приложений DNS. При установке DNS раздел каталога приложений для службы создается на уровне леса и домена. Эта операция создает дополнительные разделы каталога приложений DNS.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /createdirectorypartition <partitionFQDN>
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<partitionFQDN>` | Полное доменное имя раздела каталога приложений DNS, который будет создан. |

## <a name="dnscmd-deletedirectorypartition-command"></a>dnscmd/делетедиректорипартитион, команда

Удаляет существующий раздел каталога приложений DNS.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /deletedirectorypartition <partitionFQDN>
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<partitionFQDN>` | Полное доменное имя раздела каталога приложений DNS, который будет удален. |

## <a name="dnscmd-directorypartitioninfo-command"></a>dnscmd/директорипартитионинфо, команда

Выводит сведения о указанном разделе каталога приложений DNS.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /directorypartitioninfo <partitionFQDN> [/detail]
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<partitionFQDN>` | Полное доменное имя раздела каталога приложений DNS. |
| /detail | Выводит все сведения о разделе каталога приложений. |

## <a name="dnscmd-enlistdirectorypartition-command"></a>dnscmd/енлистдиректорипартитион, команда

Добавляет DNS-сервер в набор реплик указанного раздела каталога.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /enlistdirectorypartition <partitionFQDN>
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<partitionFQDN>` | Полное доменное имя раздела каталога приложений DNS. |

## <a name="dnscmd-enumdirectorypartitions-command"></a>dnscmd/енумдиректорипартитионс, команда

Выводит разделы каталога приложений DNS для указанного сервера.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /enumdirectorypartitions [/custom]
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| /кустом | Содержит только разделы каталога, созданные пользователем. |

## <a name="dnscmd-enumrecords-command"></a>dnscmd/енумрекордс, команда

Список записей ресурсов указанного узла в зоне DNS.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /enumrecords <zonename> <nodename> [/type <rrtype> <rrdata>] [/authority] [/glue] [/additional] [/node | /child | /startchild<childname>] [/continue | /detail]
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| /енумрекордс | Список записей ресурсов в указанной зоне. |
| `<zonename>` | Указывает имя зоны, к которой относятся записи ресурсов. |
| `<nodename>` | Указывает имя узла записей ресурсов. |
| `[/type <rrtype> <rrdata>]` | Указывает тип записей ресурсов для перечисления и ожидаемый тип данных. Принимает значения:<ul><li>`<rrtype>`— Указывает тип записей ресурсов для перечисления.</li><li>`<rrdata>`— Указывает тип ожидаемых записей.</li></ul> |
| /аусорити | Включает достоверные данные. |
| /глуе | Включает в себя связывающие данные. |
| /аддитионал | Включает все дополнительные сведения о перечисленных записях ресурсов. |
| /node | Выводит только записи ресурсов указанного узла. |
| /чилд | Выводит только записи ресурсов указанного дочернего домена. |
| /стартчилд`<childname>` | Начинает список в указанном дочернем домене. |
| /континуе | Выводит только записи ресурсов с их типом и данными. |
| /detail | Выводит все сведения о записях ресурсов. |

#### <a name="example"></a>Пример

```
dnscmd /enumrecords test.contoso.com test /additional
```

## <a name="dnscmd-enumzones-command"></a>dnscmd/енумзонес, команда

Список зон, существующих на указанном DNS-сервере. Параметры **енумзонес** выступают как фильтры в списке зон. Если фильтры не указаны, возвращается полный список зон. Если задан фильтр, в возвращаемый список зон включаются только те зоны, которые соответствуют критериям этого фильтра.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /enumzones [/primary | /secondary | /forwarder | /stub | /cache | /auto-created] [/forward | /reverse | /ds | /file] [/domaindirectorypartition | /forestdirectorypartition | /customdirectorypartition | /legacydirectorypartition | /directorypartition <partitionFQDN>]
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| /primary | Список всех зон, которые являются стандартными основными зонами или интегрированными зонами Active Directory. |
| /секондари | Список всех стандартных вторичных зон. |
| /форвардер | Список зон, пересылаемых неразрешенные запросы на другой DNS-сервер. |
| /stub прилагает | Список всех зон-заглушек. |
| /Cache | Выводит только зоны, загруженные в кэш. |
| /ауто-креатед] | Список зон, созданных автоматически во время установки DNS-сервера. |
| /форвард | Перечисление зон прямого просмотра. |
| /реверсе | Перечисление зон обратного просмотра. |
| /ds | Список зон, интегрированных с Active Directory. |
| /File | Содержит список зон, которые поддерживаются файлами. |
| /домаиндиректорипартитион | Содержит список зон, которые хранятся в разделе каталога домена. |
| /форестдиректорипартитион | Содержит список зон, которые хранятся в разделе каталога приложений DNS леса. |
| /кустомдиректорипартитион | Список всех зон, которые хранятся в определяемом пользователем разделе каталога приложений. |
| /легацидиректорипартитион | Список всех зон, хранящихся в разделе каталога домена. |
| /директорипартитион`<partitionFQDN>` | Список всех зон, хранящихся в указанном разделе каталога. |

#### <a name="examples"></a>Примеры

- [Пример 2. Отображение полного списка зон на DNS-сервере](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc784399(v=ws.10)#example-2-display-a-complete-list-of-zones-on-a-dns-server))

- [Пример 3. Отображение списка автосозданных зон на DNS-сервере](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc784399(v=ws.10)#example-3-display-a-list-of-autocreated-zones-on-a-dns-server)

## <a name="dnscmd-exportsettings-command"></a>dnscmd/експортсеттингс, команда

Создает текстовый файл со списком сведений о конфигурации DNS-сервера. Текстовый файл называется *DnsSettings.txt*. Он находится в `%systemroot%\system32\dns` каталоге сервера. Сведения в файле, создаваемом **dnscmd/експортсеттингс** , можно использовать для устранения неполадок конфигурации или для проверки того, что несколько серверов настроены одинаково.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /exportsettings
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |

## <a name="dnscmd-info-command"></a>dnscmd/info, команда

Отображает параметры из раздела DNS в реестре указанного сервера `HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNS\Parameters` . Чтобы отобразить параметры реестра на уровне зоны, используйте `dnscmd zoneinfo` команду.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /info [<settings>]
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<settings>` | Любой параметр, возвращаемый командой **info** , можно указать отдельно. Если параметр не указан, возвращается отчет об общих параметрах. |

#### <a name="example"></a>Пример

- [Пример 4. Отображение параметра Slave с DNS-сервера](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc784399(v=ws.10)#example-4-display-the-isslave-setting-from-a-dns-server)

- [Пример 5. Отображение параметра Рекурсионтимеаут с DNS-сервера](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc784399(v=ws.10)#example-5-display-the-recursiontimeout-setting-from-a-dns-server)

## <a name="dnscmd-ipvalidate-command"></a>dnscmd/ипвалидате, команда

Проверяет, определяет ли IP-адрес действующий DNS-сервер или может ли DNS-сервер выполнять роль сервера пересылки, корневого сервера указания или главного сервера для определенной зоны.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /ipvalidate <context> [<zonename>] [[<IPaddress>]]
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<context>` | Указывает тип выполняемого теста. Можно указать любой из следующих тестов.<ul><li>**/днссерверс** — проверяет, что компьютеры с указанными адресами являются РАБОТАЮЩИМИ DNS-серверами.</li><li>**/форвардерс** — проверяет, что указанные адреса определяют DNS-серверы, которые могут использоваться в качестве серверов пересылки.</li><li>**/русинтс** — проверяет, что указанные адреса определяют DNS-серверы, которые могут использоваться в качестве серверов имен корневых подсказок.</li><li>**/зонемастерс** — проверяет, что указанные адреса определяют DNS-серверы, являющиеся главными серверами для *zonename*. |
| `<zonename>` | Идентифицирует зону. Используйте этот параметр с параметром **/зонемастерс** . |
| `<IPaddress>` | Указывает IP-адреса, которые проверяет команда. |

#### <a name="examples"></a>Примеры

```
nscmd dnssvr1.contoso.com /ipvalidate /dnsservers 10.0.0.1 10.0.0.2
dnscmd dnssvr1.contoso.com /ipvalidate /zonemasters corp.contoso.com 10.0.0.2
```

## <a name="dnscmd-nodedelete-command"></a>dnscmd/нодеделете, команда

Удаляет все записи для указанного узла.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /nodedelete <zonename> <nodename> [/tree] [/f]
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает имя зоны. |
| `<nodename>` | Указывает имя узла для удаления. |
| /три | Удаляет все дочерние записи. |
| /f | Выполняет команду без запроса подтверждения. |

#### <a name="example"></a>Пример

[Пример 6. Удаление записей из узла](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc784399(v=ws.10)#example-6-delete-the-records-from-a-node)

## <a name="dnscmd-recordadd-command"></a>dnscmd/рекордадд, команда

Добавляет запись в указанную зону на DNS-сервере.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /recordadd <zonename> <nodename> <rrtype> <rrdata>
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает зону, в которой находится запись. |
| `<nodename>` | Указывает конкретный узел в зоне. |
| `<rrtype>` | Указывает тип добавляемой записи. |
| `<rrdata>` | Указывает ожидаемый тип данных. |

> [!NOTE]
> После добавления записи убедитесь, что используется правильный тип данных и формат данных. Список типов записей ресурсов и соответствующих типов данных см. в разделе [примеры dnscmd](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc784399(v=ws.10)).

#### <a name="examples"></a>Примеры

```
dnscmd dnssvr1.contoso.com /recordadd test A 10.0.0.5
dnscmd /recordadd test.contoso.com test MX 10 mailserver.test.contoso.com
```

## <a name="dnscmd-recorddelete-command"></a>dnscmd/рекордделете, команда

Удаляет запись ресурса в указанную зону.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /recorddelete <zonename> <nodename> <rrtype> <rrdata> [/f]
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает зону, в которой находится запись ресурса. |
| `<nodename>` | Указывает имя узла. |
| `<rrtype>` | Указывает тип удаляемой записи ресурса. |
| `<rrdata>` | Указывает ожидаемый тип данных. |
| /f | Выполняет команду без запроса подтверждения. Так как у узлов может быть несколько записей ресурсов, эта команда требует очень подробного указания типа записи ресурса, которую необходимо удалить. Если указать тип данных и не указать тип данных записи ресурса, то будут удалены все записи с этим конкретным типом данных для указанного узла. |

#### <a name="examples"></a>Примеры

```
dnscmd /recorddelete test.contoso.com test MX 10 mailserver.test.contoso.com
```

## <a name="dnscmd-resetforwarders-command"></a>dnscmd/ресетфорвардерс, команда

Выбирает или сбрасывает IP-адреса, на которые DNS-сервер перенаправляет запросы DNS, если им не удается разрешить их локально.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /resetforwarders <IPaddress> [,<IPaddress>]...][/timeout <timeout>] [/slave | /noslave]
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<IPaddress>` | Список IP-адресов, на которые DNS-сервер перенаправляет неразрешенные запросы. |
| /timeout`<timeout>` | Задает количество секунд, в течение которых DNS-сервер ожидает ответа от сервера пересылки. По умолчанию это значение равно пяти секундам. |
| /славе | Предотвращает выполнение собственных итеративных запросов DNS-сервером, если серверу пересылки не удается разрешить запрос. |
| /нославе | Позволяет DNS-серверу выполнять собственные итеративные запросы, если сервер пересылки не может разрешить запрос. Это параметр по умолчанию. |
| /f | Выполняет команду без запроса подтверждения. Так как у узлов может быть несколько записей ресурсов, эта команда требует очень подробного указания типа записи ресурса, которую необходимо удалить. Если указать тип данных и не указать тип данных записи ресурса, то будут удалены все записи с этим конкретным типом данных для указанного узла. |

##### <a name="remarks"></a>Комментарии

- По умолчанию DNS-сервер выполняет итеративные запросы, когда не может разрешить запрос.

- Настройка IP-адресов с помощью команды **ресетфорвардерс** приводит к тому, что DNS-сервер выполняет рекурсивные запросы к DNS-серверам по указанным IP-адресам. Если серверы пересылки не разрешают запрос, DNS-сервер может выполнять собственные итеративные запросы.

- Если используется параметр **/славе** , DNS-сервер не выполняет собственные итеративные запросы. Это означает, что DNS-сервер перенаправляет неразрешенные запросы только к DNS-серверам из списка и не пытается итеративно выполнять запросы, если серверы пересылки не разрешают их. Более эффективно задавать один IP-адрес как сервер пересылки для DNS-сервера. Вы можете использовать команду **ресетфорвардерс** для внутренних серверов в сети, чтобы перенаправить неразрешенные запросы на один DNS-сервер с внешним подключением.

- Дважды перечисление IP-адреса сервера пересылки приводит к тому, что DNS-сервер дважды попытается переслать этот сервер.

#### <a name="examples"></a>Примеры

```
dnscmd dnssvr1.contoso.com /resetforwarders 10.0.0.1 /timeout 7 /slave
dnscmd dnssvr1.contoso.com /resetforwarders /noslave
```

## <a name="dnscmd-resetlistenaddresses-command"></a>dnscmd/ресетлистенаддрессес, команда

Указывает IP-адреса на сервере, который прослушивает запросы клиентов DNS. По умолчанию все IP-адреса на DNS-сервере прослушивают запросы DNS клиента.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /resetlistenaddresses <listenaddress>
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<listenaddress>` | Указывает IP-адрес на DNS-сервере, который прослушивает запросы клиентов DNS. Если адрес прослушивания не указан, все IP-адреса на сервере прослушивают запросы клиентов. |

#### <a name="examples"></a>Примеры

```
dnscmd dnssvr1.contoso.com /resetlistenaddresses 10.0.0.1
```

## <a name="dnscmd-startscavenging-command"></a>dnscmd/стартскавенгинг, команда

Указывает DNS-серверу выполнить немедленный поиск устаревших записей ресурсов на указанном DNS-сервере.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /startscavenging
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |

##### <a name="remarks"></a>Комментарии

- Успешное выполнение этой команды немедленно запускает очистку. Если очистка завершается неудачно, выводится сообщение с предупреждением.

- Несмотря на то, что команда для запуска очистки завершается успешно, очистка не запускается, если выполняются следующие предварительные условия.

    - Очистка включена как для сервера, так и для зоны.

    - Зона запущена.

    - Записи ресурсов имеют отметку времени.

- Сведения о том, как включить очистку для сервера, см. в параметре **скавенгингинтервал** в разделе **синтаксис серверного уровня** в разделе **/config** .

- Сведения о том, как включить очистку для зоны, см. в параметре **старения** в разделе **синтаксис уровня зоны** в разделе **/config** .

- Дополнительные сведения о перезапуске приостановленной зоны см. в описании параметра **зонересуме** в этой статье.

- Сведения о том, как проверить записи ресурсов для отметки времени, см. в описании параметра **ажеаллрекордс** в этой статье.

#### <a name="examples"></a>Примеры

```
dnscmd dnssvr1.contoso.com /startscavenging
```

## <a name="dnscmd-statistics-command"></a>dnscmd/Статистикс, команда

Отображает или очищает данные для указанного DNS-сервера.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /statistics [<statid>] [/clear]
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<statid>` | Указывает, какая статистика или какая комбинация статистики должна отображаться. Команда **Statistics** отображает счетчики, которые начинаются на DNS-сервере при его запуске или возобновлении. Идентификационный номер используется для идентификации статистики. Если идентификатор статистики не указан, отображается вся статистика. Числа, которые можно указать вместе с соответствующим статистическим показателем, могут включать:<ul><li>**00000001** -время</li><li>**00000002** — запрос</li><li>**00000004** — Query2</li><li>**00000008** -рекурсия</li><li>**00000010** -Master</li><li>**00000020** — дополнительный</li><li>**00000040** — WINS</li><li>**00000100** — обновление</li><li>**00000200** -сквансек</li><li>**00000400** -DS</li><li>**00010000** -память</li><li>**00100000** -паккетмем</li><li>**00040000** — dBASE</li><li>**00080000** — записи</li><li>**00200000** -нбстатмем</li><li>**/clear** — сбрасывает указанный счетчик статистики до нуля.</li></ul> |

#### <a name="examples"></a>Примеры

- [Пример 7.](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc784399(v=ws.10)#example-7-display-time-statistics-for-a-dns-server)

- [Пример 8. Отображение статистики Нбстатмем для DNS-сервера](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc784399(v=ws.10)#example-8-display-nbstatmem-statistics-for-a-dns-server)

## <a name="dnscmd-unenlistdirectorypartition-command"></a>dnscmd/уненлистдиректорипартитион, команда

Удаляет DNS-сервер из набора реплик указанного раздела каталога.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /unenlistdirectorypartition <partitionFQDN>
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<partitionFQDN>` | Полное доменное имя раздела каталога приложений DNS, который будет удален. |

## <a name="dnscmd-writebackfiles-command"></a>dnscmd/вритебаккфилес, команда

Проверяет память DNS-сервера на наличие изменений и записывает их в постоянное хранилище. Команда **вритебаккфилес** обновляет все изменившиеся зоны или указанную зону. Зона изменена при наличии изменений в памяти, которые еще не были записаны в постоянное хранилище. Это операция уровня сервера, которая проверяет все зоны. В этой операции можно указать одну зону или выполнить операцию **зоневритебакк** .

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /writebackfiles <zonename>
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает имя зоны для обновления. |

#### <a name="examples"></a>Примеры

```
dnscmd dnssvr1.contoso.com /writebackfiles
```

## <a name="dnscmd-zoneadd-command"></a>dnscmd/зонеадд, команда

Добавляет зону на DNS-сервер.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /zoneadd <zonename> <zonetype> [/dp <FQDN> | {/domain | enterprise | legacy}]
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает имя зоны. |
| `<zonetype>` | Указывает тип создаваемой зоны. При указании типа зоны **/форвардер** или **/дсфорвардер** создается зона, которая выполняет условную пересылку. Каждый тип зоны имеет разные обязательные параметры:<ul><li>**/дспримари** — создает зону, интегрированную с Active Directory.</li><li>**/PRIMARY/file `<filename>` ** — Создает стандартную основную зону и указывает имя файла, в котором будут храниться сведения о зоне.</li><li>**/Секондари `<masterIPaddress> [<masterIPaddress>...]` ** — Создает стандартную вторичную зону.</li><li>**/stub прилагает `<masterIPaddress> [<masterIPaddress>...]` /File `<filename>` ** — создает зону-заглушку с резервным копированием файлов.</li><li>**/дсстуб `<masterIPaddress> [<masterIPaddress>...]` ** — Создает зону-заглушку, интегрированную в Active Directory.</li><li>**/форвардер `<masterIPaddress> [<masterIPaddress>]` .../file `<filename>` ** — указывает, что созданная зона пересылает неразрешенные запросы другому DNS-серверу.</li><li>**/дсфорвардер** — указывает, что созданная интегрированная зона Active Directory пересылает неразрешенные запросы другому DNS-серверу.</li></ul> |
| `<FQDN>` | Указывает полное доменное имя раздела каталога. |
| /Domain | Сохраняет зону в разделе каталога домена. |
| /ентерприсе | Сохраняет зону в разделе каталога предприятия. |
| /легаци | Сохраняет зону на устаревшем разделе каталога. |

#### <a name="examples"></a>Примеры

```
dnscmd dnssvr1.contoso.com /zoneadd test.contoso.com /dsprimary
dnscmd dnssvr1.contoso.com /zoneadd secondtest.contoso.com /secondary 10.0.0.2
```

## <a name="dnscmd-zonechangedirectorypartition-command"></a>dnscmd/зонечанжедиректорипартитион, команда

Изменяет раздел каталога, в котором находится указанная зона.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /zonechangedirectorypartition <zonename> {[<newpartitionname>] | [<zonetype>]}
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Полное доменное имя текущего раздела каталога, в котором находится зона. |
| `<newpartitionname>` | Полное доменное имя раздела каталога, в который будет перемещена зона. |
| `<zonetype>` | Указывает тип раздела каталога, в который будет перемещена зона. |
| /Domain | Перемещает зону во встроенный раздел каталога домена. |
| /Forest | Перемещает зону во встроенный раздел каталога леса. |
| /легаци | Перемещает зону в раздел каталога, который создается для предварительных контроллеров домена Active Directory. Эти разделы каталога не являются обязательными для основного режима. |

## <a name="dnscmd-zonedelete-command"></a>dnscmd/зонеделете, команда

Удаляет указанную зону.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /zonedelete <zonename> [/dsdel] [/f]
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает имя зоны, которая будет удалена. |
| /дсдел | Удаляет зону из доменных служб Azure Directory (AD DS). |
| /f | Выполняет команду без запроса подтверждения. |

#### <a name="examples"></a>Примеры

- [Пример 9. Удаление зоны с DNS-сервера](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc784399(v=ws.10)#example-9-delete-a-zone-from-a-dns-server)

## <a name="dnscmd-zoneexport-command"></a>dnscmd/зоникспорт, команда

Создает текстовый файл, в котором перечислены записи ресурсов указанной зоны. Операция **зоникспорт** создает файл записей ресурсов для интегрированной зоны Active Directory с целью устранения неполадок. По умолчанию файл, создаваемый этой командой, помещается в каталог DNS, который по умолчанию используется в качестве `%systemroot%/System32/Dns` каталога.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /zoneexport <zonename> <zoneexportfile>
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает имя зоны. |
| `<zoneexportfile>` | Указывает имя создаваемого файла. |

#### <a name="examples"></a>Примеры

- [Пример 10. Экспорт записей ресурсов зоны в файл](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc784399(v=ws.10)#example-10-export-zone-resource-records-list-to-a-file)

## <a name="dnscmd-zoneinfo"></a>dnscmd/зонеинфо

Отображает параметры из раздела реестра указанной зоны:`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNS\Parameters\Zones\<zonename>`

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /zoneinfo <zonename> [<setting>]
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает имя зоны. |
| `<setting>` | Можно отдельно указать любой параметр, возвращаемый командой **зонеинфо** . Если параметр не указан, возвращаются все параметры. |

##### <a name="remarks"></a>Комментарии

- Чтобы отобразить параметры реестра на уровне сервера, используйте команду **/info** .

- Чтобы просмотреть список параметров, которые можно отобразить с помощью этой команды, см. команду **/config** .

#### <a name="examples"></a>Примеры

- [Пример 11. Отображение параметра RefreshInterval из реестра](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc784399(v=ws.10)#example-11-display-refreshinterval-setting-from-the-registry)

- [Пример 12. Отображение параметра старения из реестра](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc784399(v=ws.10)#example-12-display-aging-setting-from-the-registry)

## <a name="dnscmd-zonepause-command"></a>dnscmd/зонепаусе, команда

Приостанавливает указанную зону, которая затем игнорирует запросы.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /zonepause <zonename>
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает имя зоны, которая должна быть приостановлена. |

##### <a name="remarks"></a>Комментарии

- Чтобы возобновить зону и сделать ее доступной после приостановки, используйте команду **/зонересуме** .

#### <a name="examples"></a>Примеры

```
dnscmd dnssvr1.contoso.com /zonepause test.contoso.com
```

## <a name="dnscmd-zoneprint-command"></a>dnscmd/зонепринт, команда

Выводит список записей в зоне.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /zoneprint <zonename>
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает имя зоны для перечисления. |







## <a name="dnscmd-zonerefresh-command"></a>dnscmd/зонерефреш, команда

Принудительное обновление дополнительной зоны DNS из главной зоны.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /zonerefresh <zonename>
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает имя зоны, которая будет обновлена. |

##### <a name="remarks"></a>Комментарии

- Команда **зонерефреш** принудительно проверяет номер версии в записи ресурса SOA главного сервера. Если номер версии на главном сервере выше номера версии сервера-получателя, инициируется зонная отправка, которая обновляет сервер-получатель. Если номер версии совпадает, перенос зоны не выполняется.

- Принудительная проверка выполняется по умолчанию каждые 15 минут. Чтобы изменить значение по умолчанию, используйте `dnscmd config refreshinterval` команду.

#### <a name="examples"></a>Примеры

```
dnscmd dnssvr1.contoso.com /zonerefresh test.contoso.com
```

## <a name="dnscmd-zonereload-command"></a>dnscmd/зонерелоад, команда

Копирует сведения о зоне из своего источника.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /zonereload <zonename>
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает имя зоны, которая будет перезагружена. |

##### <a name="remarks"></a>Комментарии

- Если зона интегрирована в Active Directory, она перезагружается из домен Active Directory Services (AD DS).

- Если зона является стандартной зоной с передачей файлов, она перегружается из файла.

#### <a name="examples"></a>Примеры

```
dnscmd dnssvr1.contoso.com /zonereload test.contoso.com
```

## <a name="dnscmd-zoneresetmasters-command"></a>dnscmd/зонересетмастерс, команда

Сбрасывает IP-адреса главного сервера, который предоставляет сведения о переносе зоны в дополнительную зону.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /zoneresetmasters <zonename> [/local] [<IPaddress> [<IPaddress>]...]
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает имя зоны для сброса. |
| /Local | Задает локальный главный список. Этот параметр используется для зон, интегрированных с Active Directory. |
| `<IPaddress>` | IP-адреса главных серверов дополнительной зоны. |

##### <a name="remarks"></a>Комментарии

- Это значение изначально задается при создании дополнительной зоны. Используйте команду **зонересетмастерс** на сервере-получателе. Это значение не действует, если оно задано на главном DNS-сервере.

#### <a name="examples"></a>Примеры

```
dnscmd dnssvr1.contoso.com /zoneresetmasters test.contoso.com 10.0.0.1
dnscmd dnssvr1.contoso.com /zoneresetmasters test.contoso.com /local
```

## <a name="dnscmd-zoneresetscavengeservers-command"></a>dnscmd/зонересетскавенжесерверс, команда

Изменяет IP-адреса серверов, которые могут очищать указанную зону.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /zoneresetscavengeservers <zonename> [/local] [<IPaddress> [<IPaddress>]...]
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает зону для очистки. |
| /Local | Задает локальный главный список. Этот параметр используется для зон, интегрированных с Active Directory. |
| `<IPaddress>` | Список IP-адресов серверов, которые могут выполнять очистку. Если этот параметр пропущен, все серверы, на которых размещается эта зона, могут очищать ее. |

##### <a name="remarks"></a>Комментарии

- По умолчанию все серверы, на которых размещается зона, могут очищать эту зону.

- Если зона размещается на нескольких DNS-серверах, эту команду можно использовать, чтобы уменьшить количество случаев очистки зоны.

- Очистка должна быть включена на DNS-сервере и зоне, на которые влияет эта команда.

#### <a name="examples"></a>Примеры

```
dnscmd dnssvr1.contoso.com /zoneresetscavengeservers test.contoso.com 10.0.0.1 10.0.0.2
```

## <a name="dnscmd-zoneresetsecondaries-command"></a>dnscmd/зонересетсекондариес, команда

Указывает список IP-адресов вторичных серверов, на которые будет отвечать главный сервер при запросе на зонную пересылку.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /zoneresetsecondaries <zonename> {/noxfr | /nonsecure | /securens | /securelist <securityIPaddresses>} {/nonotify | /notify | /notifylist <notifyIPaddresses>}
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает имя зоны, для которой будут сброшены вторичные серверы. |
| /Local | Задает локальный главный список. Этот параметр используется для зон, интегрированных с Active Directory. |
| /ноксфр | Указывает, что передача зон запрещена. |
| /нонсекуре | Указывает, что предоставлены все запросы на зонную пересылку. |
| /секуренс | Указывает, что перемещение предоставляется только серверу, указанному в записи ресурса сервера имен (NS) для зоны. |
| /секурелист | Указывает, что передачи зоны предоставляются только списку серверов. За этим параметром должен следовать IP-адрес или адреса, используемые главным сервером. |
| `<securityIPaddresses>` | Список IP-адресов, которые получают передачи зоны с главного сервера. Этот параметр используется только с параметром **/секурелист** . |
| /нонотифи | Указывает, что уведомления об изменениях не отправляются на серверы-получатели. |
| /нотифи | Указывает, что уведомления об изменениях отправляются на все серверы-получатели. |
| /нотифилист | Указывает, что уведомления об изменениях отправляются только в список серверов. За этой командой должен следовать IP-адрес или адреса, используемые главным сервером. |
| `<notifyIPaddresses>` | Указывает IP-адрес или адреса вторичного сервера или серверов, на которые отправляются уведомления об изменениях. Этот список используется только с параметром **/нотифилист** . |

##### <a name="remarks"></a>Комментарии

- Используйте команду **зонересетсекондариес** на главном сервере, чтобы указать, как она реагирует на запросы зонных передач от серверов-получателей.

#### <a name="examples"></a>Примеры

```
dnscmd dnssvr1.contoso.com /zoneresetsecondaries test.contoso.com /noxfr /nonotify
dnscmd dnssvr1.contoso.com /zoneresetsecondaries test.contoso.com /securelist 11.0.0.2
```

## <a name="dnscmd-zoneresettype-command"></a>dnscmd/зонересеттипе, команда

Изменяет тип зоны.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /zoneresettype <zonename> <zonetype> [/overwrite_mem | /overwrite_ds]
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Определяет зону, в которой будет изменяться тип. |
| `<zonetype>` | Указывает тип создаваемой зоны. Каждый тип имеет разные обязательные параметры, включая:<ul><li>**/дспримари** — создает зону, интегрированную с Active Directory.</li><li>**/PRIMARY/file `<filename>` ** — Создает стандартную основную зону.</li><li>**/Секондари `<masterIPaddress> [,<masterIPaddress>...]` ** — Создает стандартную вторичную зону.</li><li>**/stub прилагает `<masterIPaddress>[,<masterIPaddress>...]` /File `<filename>` ** — создает зону-заглушку с резервным копированием файлов.</li><li>**/дсстуб `<masterIPaddress>[,<masterIPaddress>...]` ** — Создает зону-заглушку, интегрированную в Active Directory.</li><li>**/форвардер `<masterIPaddress[,<masterIPaddress>]` .../file `<filename>` ** — указывает, что созданная зона пересылает неразрешенные запросы другому DNS-серверу.</li><li>**/дсфорвардер** — указывает, что созданная интегрированная зона Active Directory пересылает неразрешенные запросы другому DNS-серверу.</li></ul> |
| /overwrite_mem | Перезаписывает данные DNS из данных в AD DS. |
| /overwrite_ds | Перезаписывает существующие данные в AD DS. |

##### <a name="remarks"></a>Комментарии

- Если задать тип зоны **/дсфорвардер** , будет создана зона, выполняющая условную пересылку.

#### <a name="examples"></a>Примеры

```
dnscmd dnssvr1.contoso.com /zoneresettype test.contoso.com /primary /file test.contoso.com.dns
dnscmd dnssvr1.contoso.com /zoneresettype second.contoso.com /secondary 10.0.0.2
```

## <a name="dnscmd-zoneresume-command"></a>dnscmd/зонересуме, команда

Запускает указанную ранее приостановленную зону.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /zoneresume <zonename>
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает имя зоны для возобновления. |

##### <a name="remarks"></a>Комментарии

- Эту операцию можно использовать для перезапуска из операции **/зонепаусе** .

#### <a name="examples"></a>Примеры

```
dnscmd dnssvr1.contoso.com /zoneresume test.contoso.com
```

## <a name="dnscmd-zoneupdatefromds-command"></a>dnscmd/зонеупдатефромдс, команда

Обновляет указанную интегрированную зону Active Directory из AD DS.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /zoneupdatefromds <zonename>
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает имя зоны для обновления. |

##### <a name="remarks"></a>Комментарии

- Зоны, интегрированные с Active Directory, по умолчанию выполняют это обновление каждые пять минут. Чтобы изменить этот параметр, используйте `dnscmd config dspollinginterval` команду.

#### <a name="examples"></a>Примеры

```
dnscmd dnssvr1.contoso.com /zoneupdatefromds
```

## <a name="dnscmd-zonewriteback-command"></a>dnscmd/зоневритебакк, команда

Проверяет память DNS-сервера на наличие изменений, относящихся к указанной зоне, и записывает их в постоянное хранилище.

### <a name="syntax"></a>Синтаксис

```
dnscmd [<servername>] /zonewriteback <zonename>
```

#### <a name="parameters"></a>Параметры

| Параметры | Описание |
| ---------- | ----------- |
| `<servername>` | Указывает DNS-сервер для управления, представленный IP-адресом, FQDN или именем узла. Если этот параметр пропущен, используется локальный сервер. |
| `<zonename>` | Указывает имя зоны для обновления. |

##### <a name="remarks"></a>Комментарии

- Это операция на уровне зоны. Вы можете обновить все зоны на DNS-сервере с помощью операции **/вритебаккфилес** .

#### <a name="examples"></a>Примеры

```
dnscmd dnssvr1.contoso.com /zonewriteback test.contoso.com
```

## <a name="additional-references"></a>Дополнительные ссылки

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)
---
title: relog
description: Справочная статья по команде Relog, которая извлекает данные счетчиков производительности из файлов журналов счетчиков производительности.
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: 7480f6c0-9953-4d70-9b1c-b27e09d8db13
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 07/11/2018
ms.openlocfilehash: a404b896179aa43fff28556e995d369780ae544a
ms.sourcegitcommit: 145cf75f89f4e7460e737861b7407b5cee7c6645
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/29/2020
ms.locfileid: "87409715"
---
# <a name="relog"></a>relog

> Область применения: Windows Server (половина ежегодного канала), Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Извлекает счетчики производительности из журналов счетчиков производительности в другие форматы, такие как Text-TSV (для текста с разделителями-символами табуляции), Text-CSV (для текста с разделителями-запятыми), binary-BIN или SQL.

>[!NOTE]
>Дополнительные сведения о включении программы **Relog** в скрипты инструментарий управления Windows (WMI) (WMI) см. в [блоге со скриптами](https://devblogs.microsoft.com/scripting/).

## <a name="syntax"></a>Синтаксис

```
relog [<filename> [<filename> ...]] [/a] [/c <path> [<path> ...]] [/cf <filename>] [/f  {bin|csv|tsv|SQL}] [/t <value>] [/o {outputfile|DSN!CounterLog}] [/b <M/D/YYYY> [[<HH>:] <MM>:] <SS>] [/e <M/D/YYYY> [[<HH>:] <MM>:] <SS>] [/config {<filename>|i}] [/q]
```

### <a name="parameters"></a>Параметры

| Параметр | Описание |
|--|--|
| `filename [filename ...]` | Указывает путь к существующему журналу счетчиков производительности. Можно указать несколько входных файлов. |
| -a | Добавляет выходной файл вместо перезаписи. Этот параметр не применяется к формату SQL, где значение по умолчанию всегда добавляется. |
| -c`path [path ...]` | Указывает путь к журналу счетчика производительности. Чтобы указать несколько путей к счетчику, разделите их пробелом и заключите пути к счетчику в кавычки (например, `"path1 path2"` ). |
| -CF имя файла | Задает путь к текстовому файлу, в котором перечислены счетчики производительности, включаемые в файл Relog. Используйте этот параметр, чтобы вывести список путей счетчиков во входном файле, по одному на строку. Значение по умолчанию — все счетчики в исходном файле журнала регистрируются снова. |
| -f`{bin | csv | tsv | SQL}` | Указывает путь к формату выходного файла. Форматом по умолчанию является **bin**. Для базы данных SQL выходной файл указывает `DSN!CounterLog` . Расположение базы данных можно указать с помощью диспетчера ODBC для настройки имени DSN (имя системы базы данных). |
| -t значение | Указывает интервалы выборки в *n* записей. Включает каждые n точек данных в файле Relog. Значение по умолчанию — каждая точка данных. |
| -o`{Outputfile | SQL:DSN!Counter_Log}` | Указывает путь к выходному файлу или базе данных SQL, в которую будут записаны счетчики. <P>**Примечание.** Для 64-разрядных и 32-разрядных версий relog.exe необходимо определить имя DSN в источнике данных ODBC (64-bit и 32-bit соответственно) в системе. Используйте драйвер ODBC "SQL Server" для определения имени DSN. |
| -б`<M/D/YYYY> [[<HH>:]<MM>:]<SS>]` | Указывает время начала копирования первой записи из входного файла. Дата и время должны быть в указанном формате M/D/ИИИИХХ: MM: SS. |
| -e `<M/D/YYYY> [[<HH>:]<MM>:]<SS>]` | Задает время окончания копирования последней записи из входного файла. Дата и время должны быть в указанном формате M/D/ИИИИХХ: MM: SS. |
| -config`{filename | i}` | Указывает путь к файлу параметров, содержащему параметры командной строки. Если вы используете файл конфигурации, можно использовать **-i** в качестве заполнителя для списка входных файлов, которые можно поместить в командную строку. Если вы используете командную строку, не используйте **-i**. Можно также использовать подстановочные знаки, например, `*.blg` для одновременного указания нескольких имен входных файлов. |
| -Q | Отображает счетчики производительности и временные диапазоны файлов журналов, указанных во входном файле. |
| -y | Обходит запрос, отвечая на все вопросы, ответив на "Да". |
| /? | Отображение справки в командной строке. |

#### <a name="remarks"></a>Remarks

- Общий формат для путей счетчиков выглядит следующим образом: `[\<computer>] \<object>[<parent>\<instance#index>] \<counter>]` Если родительские элементы, экземпляры, индексы и счетчики формата могут содержать либо допустимое имя, либо подстановочный знак. Компоненты «компьютер», «родительский», «экземпляр» и «индекс» не нужны для всех счетчиков.

- Вы определяете пути к счетчикам, которые будут использоваться на основе самого счетчика. Например, объект **LogicalDisk** имеет экземпляр `<index>` , поэтому необходимо указать `<#index>` или шаблон. Поэтому можно использовать следующий формат: `\LogicalDisk(*/*#*)\\*` .

- В сравнении для объекта **Process** не требуется экземпляр `<index>` . Поэтому можно использовать следующий формат: `\Process(*)\ID Process` .

- Если в **родительском** имени указан подстановочный знак, будут возвращены все экземпляры указанного объекта, соответствующие заданным полям экземпляра и счетчика.

- Если в имени **экземпляра** указан подстановочный знак, будут возвращаться все экземпляры указанного объекта и родительского объекта, если все имена экземпляров, соответствующие указанному индексу, соответствуют подстановочному знаку.

- Если в имени **счетчика** указан символ-шаблон, возвращаются все счетчики указанного объекта.

- Частичное совпадение пути счетчика (например, Pro *) не поддерживается.

- Файлы счетчиков представляют собой текстовые файлы, в которых перечислены один или несколько счетчиков производительности в существующем журнале. Скопируйте полное имя счетчика из журнала или **/q** вывод в `<computer>\<object>\<instance>\<counter>` формате. Перечислите один путь счетчика в каждой строке.

- При запуске команда **Relog** копирует указанные счетчики из каждой записи во входном файле, преобразуя формат при необходимости. В файле счетчика допускаются пути с подстановочными знаками.

- Используйте параметр **/t** , чтобы указать, что входные файлы вставляются в выходные файлы с интервалами каждой `nth` записи. По умолчанию данные переносятся из каждой записи в журнал.

- Можно указать, что выходные журналы содержат записи до времени начала (т. е. **/b**), чтобы предоставить данные для счетчиков, требующих вычислительных значений отформатированного значения. Выходной файл будет содержать последние записи из входных файлов с отметками времени, меньшими, чем параметр **/e** (т. е. время окончания).

- Содержимое файла параметров, используемого с параметром **/config** , должно иметь следующий формат: `<commandoption>\<value>` , где `<commandoption>` — параметр командной строки, и `<value>` указывает его значение.

##<a name="q-examples"></a>Примеры Q #

Чтобы повторно выполнить выборку существующих журналов трассировки с фиксированными интервалами, равными 30, перечислить пути счетчиков, выходные файлы и форматы, введите:

```
relog c:\perflogs\daily_trace_log.blg /cf counter_file.txt /o c:\perflogs\reduced_log.csv /t 30 /f csv
```

Чтобы повторно выполнить выборку существующих журналов трассировки с фиксированными интервалами, равными 30, а затем перечислить пути счетчиков и выходной файл, введите:

```
relog c:\perflogs\daily_trace_log.blg /cf counter_file.txt /o c:\perflogs\reduced_log.blg /t 30
```

Чтобы выполнить повторную выборку существующих журналов трассировки в базе данных, введите:

```
relog "c:\perflogs\daily_trace_log.blg" -f sql -o "SQL:sql2016x64odbc!counter_log"
```

## <a name="additional-references"></a>Дополнительные ссылки

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)

---
title: Создание API Logman
description: Справочный раздел по команде Logman Create API, который создает сборщик данных трассировки API.
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: 2ecc0a75-2613-464a-8616-c5dc404bb736
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: bf9154d2d81f9524e3a168770cd2ed0703703884
ms.sourcegitcommit: 4f407b82435afe3111c215510b0ef797863f9cb4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/24/2020
ms.locfileid: "83820474"
---
# <a name="logman-create-api"></a>Создание API Logman

> Область применения: Windows Server (половина ежегодного канала), Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Создает сборщик данных трассировки API.

## <a name="syntax"></a>Синтаксис

```
logman create api <[-n] <name>> [options]
```

### <a name="parameters"></a>Параметры

| Параметр | Описание |
| --------- | ----------- |
| -s`<computer name>` | Выполняет команду на указанном удаленном компьютере. |
| -config`<value>` | Указывает файл параметров, содержащий параметры команды. |
| [-n]`<name>` | Имя целевого объекта. |
| -f`<bin|bincirc>` | Указывает формат журнала для сборщика данных. |
| -[-] u`<user [password]>` | Указывает пользователя для запуска от имени. При вводе `*` для пароля выводится запрос на ввод пароля. Пароль не отображается при вводе. |
| -m`<[start] [stop] [[start] [stop] [...]]>` | Изменен на запуск или выход вручную вместо запланированного времени начала или окончания. |
| -RF`<[[hh:]mm:]ss>` | Запуск сборщика данных в течение указанного периода времени. |
| -б`<M/d/yyyy h:mm:ss[AM|PM]>` | Начать сбор данных в указанное время. |
| -e `<M/d/yyyy h:mm:ss[AM|PM]>` | Конец сбора данных в указанное время. |
| -Si`<[[hh:]mm:]ss>` | Указывает интервал выборки для собираются данных счетчиков производительности. |
| -o`<path|dsn!log>` | Указывает выходной файл журнала или имя DSN и набора журналов в базе данных SQL. |
| -[-] r | Повторять сборщик данных ежедневно по указанному времени начала и окончания. |
| -[-] a | Добавление существующего файла журнала. |
| -[-] | Перезаписать существующий файл журнала. |
| -[-] v`<nnnnnn|mmddhhmm>` | Присоединяет сведения о управлении версиями файлов к концу имени файла журнала. |
| -[-] RC`<task>` | Выполните команду, указанную при каждом закрытии журнала. |
| -[-] максимум`<value>` | Максимальный размер файла журнала (в МБ или в максимальном количестве записей для журналов SQL). |
| -[-] cnf`<[[hh:]mm:]ss>` | Если указано время, создает новый файл по истечении указанного времени. Если параметр time не указан, создает новый файл при превышении максимального размера. |
| -y | Ответьте Да на все вопросы без запроса. |
| -МОДС`<path [path [...]]>` | Указывает список модулей для ведения журнала вызовов API. |
| -интерфейсы API` <module!api [module!api [...]]>` | Указывает список вызовов API, включаемых в ведение журнала. |
| -ексапис`<module!api [module!api [...]]>` | Указывает список вызовов API, исключаемых из ведения журнала. |
| -[-] Ano | Log (-Ano) только имена API или не заносить в журнал имена API (-Ano). |
| -[-] рекурсивно | Log (-recursive) или не заносить в журнал (рекурсивно) API-интерфейсы рекурсивно за пределами первого слоя. |
| -exe`<value>` | Указывает полный путь к исполняемому файлу для трассировки API. |
| /? | Отображает контекстную справку. |

#### <a name="remarks"></a>Замечания

- Где [-] присутствует, Добавление дополнительного дефиса (-) инвертирует параметр.

### <a name="examples"></a>Примеры

Чтобы создать счетчик трассировки API с именем trace_notepad, для исполняемого файла к:\виндовс\нотепад.ЕКСЕ и поместив результаты в файл к:\нотепад.ЕТЛ, введите:

```
logman create api trace_notepad -exe c:\windows\notepad.exe -o c:\notepad.etl
```

Чтобы создать счетчик трассировки API с именем trace_notepad, для исполняемого файла к:\виндовс\нотепад.ЕКСЕ сбор значений, созданных модулем по адресу c:\windows\system32\advapi32.dll, введите:

```
logman create api trace_notepad -exe c:\windows\notepad.exe -mods c:\windows\system32\advapi32.dll
```

Чтобы создать счетчик трассировки API с именем trace_notepad, для исполняемого файла к:\виндовс\нотепад.ЕКСЕ, за исключением вызова API Тлсжетвалуе, созданного модулем kernel32. dll, введите:
```
logman create api trace_notepad -exe c:\windows\notepad.exe -exapis kernel32.dll!TlsGetValue
```

## <a name="additional-references"></a>Дополнительные ссылки

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)

- [logman](logman.md)

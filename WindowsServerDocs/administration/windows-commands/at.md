---
title: at
description: Справочная статья по команде at, которая планирует выполнение команд и программ на компьютере в указанное время и дату.
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: ff18fd16-9437-4c53-8794-bfc67f5256b3
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 1ead4132b70cc98d9bdd7f478a8e3f18ab6da1aa
ms.sourcegitcommit: 2afed2461574a3f53f84fc9ec28d86df3b335685
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "85923932"
---
# <a name="at"></a>at

> Область применения: Windows Server (половина ежегодного канала), Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Планирует выполнение команд и программ на компьютере в указанное время и дату. Можно использовать только **в** том случае, если запущена служба расписания. При использовании без параметров **в** выводится список запланированных команд. Для выполнения этой команды необходимо быть членом локальной группы администраторов.

## <a name="syntax"></a>Синтаксис

```
at [\computername] [[id] [/delete] | /delete [/yes]]
at [\computername] <time> [/interactive] [/every:date[,...] | /next:date[,...]] <command>
```

### <a name="parameters"></a>Параметры

| Параметр | Описание |
| --------- | ----------- |
| `\<computername\>` | Указывает удаленный компьютер. Если этот параметр не указан, **по** расписанию команды и программы на локальном компьютере. |
| `<id>` | Указывает идентификационный номер, назначенный команде по расписанию. |
| /delete | Отменяет запланированную команду. Если опустить *идентификатор*, все запланированные команды на компьютере будут отменены. |
| /ес | Отвечает Да для всех запросов из системы при удалении запланированных событий. |
| `<time>` | Указывает время выполнения команды. время выражается в виде часов: минут в 24-часовом формате (00:00 (полночь) до 23:59). |
| интерактивный | Позволяет *команде* взаимодействовать с рабочим столом пользователя, выполнившего вход во время выполнения *команды* . |
| неделю | Выполняет *команду* в каждый указанный день или дни недели или месяца (например, каждый четверг или третий день каждого месяца). |
| `<date>` | Указывает дату выполнения команды. Можно указать один или несколько дней недели (то есть введите **M**,**T**,**W**,**th**,**F**,**S**,**SU**) или один или несколько дней месяца (то есть введите от 1 до 31). Несколько записей дат разделяются запятыми. Если опустить *дату*, **в** используется текущий день месяца. |
| очеред | Выполняет *команду* при следующем возникновении дня (например, в следующем четверг). |
| `<command>` | Указывает команду Windows, программу (т. е. exe-или COM-файл) или пакетную программу (файл. bat или. cmd), которую требуется выполнить. Если команде требуется путь в качестве аргумента, используйте абсолютный путь (то есть весь путь, начинающийся с буквы диска). Если команда находится на удаленном компьютере, укажите для имени сервера и общего ресурса нотацию UNC, а не букву удаленного диска. |
| /? | Отображение справки в командной строке. |

### <a name="remarks"></a>Комментарии

- Эта команда не загружает cmd.exe автоматически перед выполнением команд. Если исполняемый файл (exe) не используется, необходимо явно загрузить cmd.exe в начале команды следующим образом:

    ```
    cmd /c dir > c:\test.out
    ```

- При использовании этой команды без параметров командной строки запланированные задачи отображаются в таблице, отформатированной следующим образом:

    ```
    Status  ID   Day        time        Command Line
    OK      1    Each F     4:30 PM     net send group leads status due
    OK      2    Each M     12:00 AM    chkstor > check.file
    OK      3    Each F     11:59 PM    backup2.bat
    ```

- Если включить идентификационный номер (*ID*) с этой командой, только сведения для одной записи отображаются в формате, аналогичном следующему:

    ```
    Task ID: 1
    Status: OK
    Schedule: Each  F
    Time of Day: 4:30 PM
    Command: net send group leads status due
    ```

- После планирования команды, особенно команды с параметрами командной строки, проверьте правильность синтаксиса команды **, введя команду без параметров командной строки** . Если сведения в столбце **командной строки** неверны, удалите команду и введите ее снова. Если она по-прежнему неверна, повторно введите команду, используя меньше параметров командной строки.

- Команды, запланированные в **при** запуске как фоновые процессы. Выходные данные не отображаются на экране компьютера. Чтобы перенаправить вывод в файл, используйте символ перенаправления `>` . При перенаправлении выходных данных в файл необходимо использовать escape-символ `^` перед символом перенаправления, независимо от того, используется ли в командной **at** строке или в пакетном файле. Например, чтобы перенаправить вывод в *output.txt*, введите:

    ```
    at 14:45 c:\test.bat ^>c:\output.txt
    ```

    Текущим каталогом для выполняемой команды является папка SystemRoot.

- Если изменить системное время после того, как вы запланируете выполнение команды, синхронизируйте планировщик **at** с измененным системным временем **, введя параметр** без параметров командной строки.

- Запланированные команды хранятся в реестре. В результате вы не потеряли запланированные задачи при перезапуске службы расписания.

- Не используйте перенаправленный диск для запланированных заданий, обращающихся к сети. Возможно, служба расписания не может получить доступ к перенаправленному диску, или перенаправленный диск может отсутствовать, если во время выполнения запланированной задачи в системе вошел другой пользователь. Вместо этого используйте UNC-пути для запланированных заданий. Пример:

    ```
    at 1:00pm my_backup \\server\share
    ```

    Не используйте следующий синтаксис, где **x:** — это соединение, устанавливаемое пользователем:

    ```
    at 1:00pm my_backup x:
    ```

    Если вы запланируете команду **at** , которая использует букву диска для подключения к общему каталогу, включите команду **at** , чтобы отключить диск по завершении работы с диском. Если диск не отключен, назначенная буква диска не будет доступна в командной строке.

- По умолчанию задачи, запланированные с помощью этой команды, будут прекращаться через 72 часов. Можно изменить реестр, чтобы изменить это значение по умолчанию.

    **Изменение реестра**

    > [!Caution]
    > Неправильное изменение реестра может серьезно повредить систему. Перед внесением изменений следует сделать резервную копию всех ценных данных на компьютере.

    1. Запустите редактор реестра (regedit.exe).

    2. В реестре выберите и щелкните следующий раздел:`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Schedule`

    3. В меню **Правка** выберите команду **Добавить значение**, а затем добавьте следующие значения реестра:

        - **Имя значения.** аттаскмаксхаурс

        - **Тип данных.** reg_DWOrd

        - **Основание системы счисления.** Decimal

        - **Данные значения:** 0,0. Значение **0** в поле **данных значения** указывает на отсутствие ограничения и не останавливается. Значения от 1 до 99 указывают количество часов.

- Вы можете использовать папку «Назначенные задания» для просмотра или изменения параметров задачи, созданной с помощью этой команды. При планировании задачи с помощью этой команды задача отображается в папке «Назначенные задания» с именем, указанным ниже:**At3478**. Однако при изменении задачи в папке «Назначенные задания» она обновляется до обычной запланированной задачи. Задача больше не является видимой для команды **at** , а параметр учетной записи at больше не применяется. Необходимо явно ввести учетную запись пользователя и пароль для задачи.

## <a name="examples"></a>Примеры

Чтобы отобразить список команд, запланированных на сервере Marketing, введите:

```
at \\marketing
```

Чтобы получить дополнительные сведения о команде с идентификационным номером 3 на сервере Corp, введите:

```
at \\corp 3
```

Планирование выполнения команды net share на корпоративном сервере 8:00 утра и перенаправьте список на сервер обслуживания, в общий каталог Reports и в файл Corp.txt введите:

```
at \\corp 08:00 cmd /c net share reports=d:\marketing\reports >> \\maintenance\reports\corp.txt
```

Чтобы создать резервную копию жесткого диска маркетингового сервера на ленточный накопитель каждые пять дней, создайте пакетную программу с именем Archive. cmd, которая содержит команды резервного копирования, а затем запланируйте выполнение пакетной программы, наберите:

```
at \\marketing 00:00 /every:5,10,15,20,25,30 archive
```

Чтобы отменить все команды, запланированные на текущем сервере, очистите сведения **о расписании, как** показано ниже.

```
at /delete
```

Чтобы выполнить команду, которая не является исполняемым файлом (exe), перед командой выполните команду с помощью команды **cmd/c** для загрузки cmd.exe следующим образом:

```
cmd /c dir > c:\test.out
```

## <a name="additional-references"></a>Дополнительные ссылки

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)

- [schtasks](schtasks.md). Другое средство планирования командной строки.

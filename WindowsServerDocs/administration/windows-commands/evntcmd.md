---
title: evntcmd
description: Справочный раздел по команде evntcmd, который настраивает преобразование событий в ловушки, назначения ловушек или и то, и другое в зависимости от информации в файле конфигурации.
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: c1aabb74-76e7-4304-95a6-50ad87e92fd9
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: e922d7876a8065a0e05e9fa7bf2cf8db45bffd25
ms.sourcegitcommit: bf887504703337f8ad685d778124f65fe8c3dc13
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/16/2020
ms.locfileid: "83437099"
---
# <a name="evntcmd"></a>evntcmd

> Область применения: Windows Server (половина ежегодного канала), Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Настраивает преобразование событий в ловушки, назначения ловушек или и то, и другое в зависимости от информации в файле конфигурации.

## <a name="syntax"></a>Синтаксис

```
evntcmd [/s <computername>] [/v <verbositylevel>] [/n] <filename>
```

### <a name="parameters"></a>Параметры

| Параметр | Описание |
| --------- | ----------- |
| ключ`<computername>` | Указывает имя компьютера, на котором требуется настроить перевод событий в ловушки, назначения ловушек или и то, и другое. Если компьютер не указан, Конфигурация выполняется на локальном компьютере. |
| /v`<verbositylevel>` | Указывает, какие типы сообщений о состоянии отображаются при настройке ловушек и назначений ловушек. Этот параметр должен быть целым числом от 0 до 10. При указании 10 отображаются все типы сообщений, включая сообщения трассировки и предупреждения о том, была ли конфигурация ловушки успешной. Если указано значение 0, сообщения не отображаются. |
| /n | Указывает, что службу SNMP не следует перезапускать, если этот компьютер получает изменения конфигурации ловушек. |
| `<filename>` | Указывает имя файла конфигурации, который содержит сведения о переводе событий в ловушки и назначения ловушек, которые необходимо настроить. |
| /? | Отображение справки в командной строке. |

#### <a name="remarks"></a>Комментарии

- Если вы хотите настроить ловушки, но не назначения ловушек, можно создать допустимый файл конфигурации, используя событие для перехвата ловушки, которое является графической программой. Если служба SNMP установлена, вы можете запустить событие в ловушке транслятора, введя **evntwin** в командной строке. Определив нужные ловушки, нажмите кнопку **Экспорт** , чтобы создать файл, подходящий для использования с **evntcmd**. Вы можете использовать событие для ловушки, чтобы легко создать файл конфигурации, а затем использовать файл конфигурации с командой **evntcmd** в командной строке для быстрой настройки ловушек на нескольких компьютерах.

- Для настройки ловушки используется следующий синтаксис:

  ```
  #pragma add <eventlogfile> <eventsource> <eventID> [<count> [<period>]]
  ```

  Где выполняется следующий текст:

    - **#pragma** должны находиться в начале каждой записи в файле.

    - Параметр **Add** указывает, что необходимо добавить событие в конфигурацию ловушки.

    - Параметры **евентлогфиле**, **EventSource**и **EventID** являются обязательными, и, где **евентлогфиле** указывает файл, в который записывается событие, **EventSource** Указывает приложение, создающее событие, и **EventID** указывает уникальный номер, определяющий каждое событие.

    Чтобы определить, какие значения соответствуют каждому событию, запустите событие в ловушке транслятора, введя **evntwin** в командной строке. Щелкните **Настраиваемый**и нажмите кнопку **изменить**. В разделе **источники событий**просмотрите папки, пока не обнаружите событие, которое нужно настроить, щелкните его и нажмите кнопку **Добавить**. Сведения об источнике события, файле журнала событий и ИДЕНТИФИКАТОРе события отображаются в разделе идентификатор **источника, журнала**и **ловушки**соответственно.

    - Параметр **Count** является необязательным и указывает, сколько раз должно произойти событие, прежде чем будет отправлено сообщение ловушки. Если этот параметр не используется, сообщение ловушки отправляется после однократного возникновения события.

    - Параметр **period** является необязательным, но он требует использования параметра **Count** . Параметр **period указывает период** времени (в секундах), в течение которого событие должно произойти указанное в параметре **Count** число раз, прежде чем будет отправлено сообщение ловушки. Если этот параметр не используется, сообщение ловушки отправляется после наступления события числом, указанным в параметре ***Count*** , независимо от того, сколько времени прошло между повторениями.

- Для удаления ловушки используется следующий синтаксис:

  ```
  #pragma delete <eventlogfile> <eventsource> <eventID>
  ```

  Где выполняется следующий текст:

    - **#pragma** должны находиться в начале каждой записи в файле.

    - Параметр **Delete** указывает, что необходимо удалить событие в конфигурацию ловушек.

    - Параметры **евентлогфиле**, **EventSource**и **EventID** являются обязательными, и, где **евентлогфиле** указывает файл, в который записывается событие, **EventSource** Указывает приложение, создающее событие, и **EventID** указывает уникальный номер, определяющий каждое событие.

    Чтобы определить, какие значения соответствуют каждому событию, запустите событие в ловушке транслятора, введя **evntwin** в командной строке. Щелкните **Настраиваемый**и нажмите кнопку **изменить**. В разделе **источники событий**просмотрите папки, пока не обнаружите событие, которое нужно настроить, щелкните его и нажмите кнопку **Добавить**. Сведения об источнике события, файле журнала событий и ИДЕНТИФИКАТОРе события отображаются в разделе идентификатор **источника, журнала**и **ловушки**соответственно.

- Для настройки назначения ловушки используется следующий синтаксис:

  ```
  #pragma add_TRAP_DEST <communityname> <hostID>
  ```

  Где выполняется следующий текст:

    - **#pragma** должны находиться в начале каждой записи в файле.

    - Параметр **add_TRAP_DEST** указывает, что необходимо отправлять сообщения ловушек на указанный узел в сообществе.

    - Параметр **коммунитинаме** указывает имя сообщества, в котором отправляются сообщения о ловушках.

    - Параметр **hostID** указывает имя или IP-адрес узла, на который должны отправляться сообщения ловушки.

- Для удаления назначения ловушки используется следующий синтаксис:

  ```
  #pragma delete_TRAP_DEST <communityname> <hostID>
  ```

  Где выполняется следующий текст:

    - **#pragma** должны находиться в начале каждой записи в файле.

    - Параметр **delete_TRAP_DEST** указывает, что не нужно отправлять сообщения о ловушках на указанный узел в сообществе.

    - Параметр **коммунитинаме** указывает имя сообщества, для которого не должны отправляться сообщения о ловушках.

    - Параметр **hostID** указывает имя или IP-адрес узла, на который не нужно отправлять сообщения ловушки.

### <a name="examples"></a>Примеры

В следующих примерах показаны записи в файле конфигурации для команды **evntcmd** . Они не предназначены для ввода в командной строке.

Чтобы отправить сообщение ловушки при перезапуске службы журнала событий, введите:

```
#pragma add System Eventlog 2147489653
```

Чтобы отправить сообщение ловушки, если служба журнала событий перезапускается дважды в течение трех минут, введите:

```
#pragma add System Eventlog 2147489653 2 180
```

Чтобы отключить отправку сообщения о ловушке при перезапуске службы журнала событий, введите:

```
#pragma delete System Eventlog 2147489653
```

Чтобы отправить сообщения о ловушках из сообщества с именем *Public* на узел с IP-адресом *192.168.100.100*, введите:

```
#pragma add_TRAP_DEST public 192.168.100.100
```

Чтобы отправить сообщения о ловушках в сообществе с именем *Private* на узел с именем *host1*, введите:

```
#pragma add_TRAP_DEST private Host1
```

Чтобы запретить отправку сообщений о ловушках в сообществе с именем *Private* на тот же компьютер, на котором настраивается назначение ловушек, введите:

```
#pragma delete_TRAP_DEST private localhost
```

## <a name="additional-references"></a>Дополнительные ссылки

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)

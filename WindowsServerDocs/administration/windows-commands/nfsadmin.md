---
title: nfsadmin
description: Справочная статья по команде nfsadmin, которая управляет сервером для NFS и клиентом для NFS.
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: 7375b2cf-c6b8-45b5-abf6-6c10e462defd
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: ad88594d534c64c0651fcc4e094fef669a02f16c
ms.sourcegitcommit: 2afed2461574a3f53f84fc9ec28d86df3b335685
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "85932337"
---
# <a name="nfsadmin"></a>nfsadmin

> Область применения: Windows Server (половина ежегодного канала), Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Служебная программа командной строки, которая используется для администрирования сервера NFS или клиента для NFS на локальном или удаленном компьютере под управлением служб Майкрософт для NFS. При использовании без параметров nfsadmin Server отображает текущие параметры конфигурации сервера для NFS и nfsadmin Client отображает текущие параметры конфигурации клиента для NFS.

## <a name="syntax"></a>Синтаксис

```
nfsadmin server [computername] [-u Username [-p Password]] -l
nfsadmin server [computername] [-u Username [-p Password]] -r {client | all}
nfsadmin server [computername] [-u Username [-p Password]] {start | stop}
nfsadmin server [computername] [-u Username [-p Password]] config option[...]
nfsadmin server [computername] [-u Username [-p Password]] creategroup <name>
nfsadmin server [computername] [-u Username [-p Password]] listgroups
nfsadmin server [computername] [-u Username [-p Password]] deletegroup <name>
nfsadmin server [computername] [-u Username [-p Password]] renamegroup <oldname> <newname>
nfsadmin server [computername] [-u Username [-p Password]] addmembers <hostname>[...]
nfsadmin server [computername] [-u Username [-p Password]] listmembers
nfsadmin server [computername] [-u Username [-p Password]] deletemembers <hostname><groupname>[...]
nfsadmin client [computername] [-u Username [-p Password]] {start | stop}
nfsadmin client [computername] [-u Username [-p Password]] config option[...]
```

### <a name="general-parameters"></a>Общие параметры

| Параметр | Описание |
| --------- | ----------- |
| computername | Указывает удаленный компьютер, который требуется администрировать. Можно указать компьютер, используя имя службы Windows Internet Name Service (WINS) или имя DNS или IP-адрес. |
| -u имя пользователя | Указывает имя пользователя, учетные данные которого будут использоваться. Может потребоваться добавить доменное имя в имя пользователя в формате *домен \ имя_пользователя*. |
| -p пароль | Указывает пароль пользователя, указанного с помощью параметра **-u** . Если указать параметр **-u** , но опустить параметр **-p** , будет предложено ввести пароль пользователя. |

### <a name="server-for-nfs-related-parameters"></a>Сервер для параметров, связанных с NFS

| Параметр | Описание |
| --------- | ----------- |
| -l | Список всех блокировок, удерживаемых клиентами. |
| -r`{client|all}` | Освобождает блокировки, удерживаемые клиентом, или, если все они указаны, всеми клиентами. |
| start | Запускает службу сервера для NFS. |
| stop | Останавливает службу сервера для NFS. |
| config | Задает общие параметры для сервера для NFS. Необходимо указать хотя бы один из следующих параметров с помощью аргумента команды **config** :<ul><li>**мапсвр = `<server>` ** — Задает сервер в качестве сервера сопоставление имен пользователей Server для NFS. Хотя этот параметр по прежнему поддерживается для совместимости с предыдущими версиями, вместо него следует использовать служебную программу сфуадмин.</li><li>**аудитлокатион = `{eventlog|file|both|none}` ** — Указывает, будут ли события проверяться и где будут записываться события. Требуется один из следующих аргументов:<ul><li>**EventLog** — указывает, что события аудита будут записываться только в журнал приложений Просмотр событий.</li><li>**файл** — указывает, что события аудита будут записываться только в файл, заданный параметром `config fname` .</li><li>**both** — указывает, что события аудита будут записываться в журнал приложений Просмотр событий, а также в файл, указанный параметром `config fname` .</li><li>**нет** — указывает, что события не подлежат аудиту.</li></ul><li>**fname = `<file>` ** — Задает файл, указанный параметром file, в качестве файла аудита. Значение по умолчанию — **%сфудир%\лог \\ нфссвр. log**.</li><li>**fsize = `<size>` ** — Задает максимальный размер файла аудита в мегабайтах. По умолчанию максимальный размер равен **7 МБ**.</li><li>**`audit=[+|-]mount [+|-]read [+|-]write [+|-]create [+|-]delete [+|-]locking [+|-]all`**— Указывает события для записи в журнал. Чтобы начать запись в журнал события, введите знак плюса ( **+** ) перед именем события; чтобы отключить запись в журнал события, введите знак минус ( **-** ) перед именем события. Если знак не указан, **+** принимается знак. Не используйте **ALL** с любым другим именем события.</li><li>**локкпериод = `<seconds>` ** — Указывает время в секундах, в течение которого сервер для NFS будет ожидать освобождения блокировок после того, как подключение к серверу для NFS было потеряно, а затем повторно установлено или после перезапуска службы сервера для NFS.</li><li>**портмаппротокол = `{TCP|UDP|TCP+UDP}` ** — Указывает, какие транспортные протоколы поддерживает сопоставление портов. Значение по умолчанию — **TCP + UDP**.</li><li>**маунтпротокол = `{TCP|UDP|TCP+UDP}` ** — Указывает, какие транспортные протоколы поддерживают подключение. Значение по умолчанию — **TCP + UDP**.</li><li>**нфспротокол = `{TCP|UDP|TCP+UDP}` ** — Указывает, какие транспортные протоколы поддерживает NFS. Значение по умолчанию — **TCP + UDP** .</li><li>**нлмпротокол = `{TCP|UDP|TCP+UDP}` ** — Указывает, какие транспортные протоколы поддерживает диспетчер сетевых блокировок (NLM). Значение по умолчанию — **TCP + UDP**.</li><li>**нсмпротокол = `{TCP|UDP|TCP+UDP}` ** — Указывает, какие транспортные протоколы поддерживает диспетчер состояния сети (NSM). Значение по умолчанию — **TCP + UDP**.</li><li>**enableV3 = `{yes|no}` ** — Указывает, будут ли поддерживаться протоколы NFS версии 3. Значение по умолчанию — **Да**.</li><li>**реневаус = `{yes|no}` ** — Указывает, требуется ли повторная проверка подлинности клиентских подключений после периода, указанного в параметре config реневаусинтервал. Значение по умолчанию — **нет**.</li><li>**реневаусинтервал = `<seconds>` ** — Указывает количество секунд, которое должно пройти до принудительной повторной проверки подлинности клиента, если `config renewauth` для параметра задано значение **Да**. Значение по умолчанию — **600 секунд**.</li><li>**диркаче = `<size>` ** — Указывает размер кэша каталога в килобайтах. Число, указанное как size, должно быть кратно 4 в диапазоне от 4 до 128. Размер кэша каталога по умолчанию составляет **128 КБ**.</li><li>**транслатионфиле = `<file>` ** — Указывает файл, содержащий сведения о сопоставлении для замены символов в именах файлов при их перемещении из файловых систем на основе Windows в UNIX. Если файл не указан, то преобразование символов в имени файла отключено. Если значение **транслатионфиле** изменено, необходимо перезапустить сервер, чтобы изменения вступили в силу.</li><li>**дотфилешидден = `{yes|no}` ** — Указывает, будут ли файлы с именами, начинающимися с точки (.), помечаться как скрытые в файловой системе Windows и, следовательно, скрыты от клиентов NFS. Значение по умолчанию — **нет**.</li><li>**касесенситивелукупс = `{yes|no}` ** — Указывает, учитывается ли регистр при поиске в каталоге (требуется точное соответствие регистру символов).<p>Кроме того, необходимо отключить учет регистра ядра Windows для поддержки имен файлов, учитывающих регистр. Для поддержки учета регистра измените значение **DWORD** раздела реестра `HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\kernel` на **0**.</li><li>**нтфскасе = `{lower|upper|preserve}` ** — Указывает, будет ли регистр символов в именах файлов в файловой системе NTFS возвращаться в нижнем регистре, в верхнем регистре или в форме, хранящейся в каталоге. Значение по умолчанию — **Preserve**. Этот параметр нельзя изменить, если для **касесенситивелукупс** задано значение **Да**.</li></ul> |
| CreateGroup`<name>` | Создает новую группу клиентов, предоставляя ей указанное имя. |
| ListGroups | Отображает имена всех групп клиентов. |
| делетеграуп`<name>` | Удаляет группу клиентов, указанную по имени. |
| ренамеграуп `<oldname>``<newname>` | Изменяет имя группы клиентов, заданной параметром *oldname* , на *новое_имя*. |
| аддмемберс`<hostname>[...]` | Добавляет *узел* в группу клиентов, указанную по *имени*. |
| листмемберс`<name>` | Список узлов в группе клиентов, заданной по *имени*. |
| делетемемберс`<hostname><groupname>[...]` | Удаляет клиент, указанный *узлом* , из группы клиентов, указанной в поле *Группа*. |

### <a name="client-for-nfs-related-parameters"></a>Клиент для параметров, связанных с NFS

| Параметр | Описание |
| --------- | ----------- |
| start | Запускает службу клиента для NFS. |
| stop | Останавливает службу клиента для NFS. |
| config | Задает общие параметры для клиента для NFS. Необходимо указать хотя бы один из следующих параметров с помощью аргумента команды **config** :<ul><li>**FileAccess = `<mode>` ** — Указывает режим разрешений по умолчанию для файлов, созданных на серверах сетевой файловой системы (NFS). Аргумент **mode** состоит из трех цифр: от 0 до 7 (включительно), которые представляют разрешения по умолчанию, предоставленные пользователю, группе и другим пользователям. Цифры переводятся в разрешения в стиле UNIX следующим образом: *0 = нет*, *1 = x (Execute)*, *2 = w (только запись)*, *3 = WX (запись и выполнение)*, *4 = r (только чтение)*, *5 = RX (чтение и выполнение)*, *6 = RW (чтение и*запись) и *7 = rwx (чтение, запись и выполнение)*. Например, `fileaccess=750` предоставляет разрешения на чтение, запись и выполнение для владельца, разрешения чтение и выполнение для группы, а также нет разрешения на доступ к другим пользователям.</li><li>**мапсвр = `<server>` ** — Задает сервер в качестве сервера сопоставление имен пользователей для клиента для NFS. Хотя этот параметр по прежнему поддерживается для совместимости с предыдущими версиями, вместо него следует использовать служебную программу сфуадмин.</li><li>**мтипе = `{hard|soft}` ** — Указывает тип подключения по умолчанию. Для подключения с жестким подключением клиент для NFS повторяет сбой RPC, пока он не завершится успешно. Для мягкого подключения клиент для NFS возвращает ошибку вызывающему приложению после повторного выполнения вызова, указанного в параметре Retry.</li><li>**Повторная попытка = `<number>` ** — Указывает количество попыток установить подключение для мягкого подключения. Это значение должно быть от 1 до 10 включительно. Значение по умолчанию — **1**.</li><li>**время ожидания `<seconds>` =** — Указывает количество секунд ожидания соединения (удаленный вызов процедуры). Это значение должно быть *0,8*, *0,9*или целым числом от *1 до 60*включительно. Значение по умолчанию — **0,8**.</li><li>**протокол = `{TCP|UDP|TCP+UDP}` ** — Указывает, какие транспортные протоколы поддерживает клиент. Значение по умолчанию — **TCP + UDP**.</li><li>**rsize = `<size>` ** — Задает размер буфера чтения (в килобайтах). Это значение может быть *0,5, 1, 2, 4, 8, 16* или *32*. Значение по умолчанию — **32**.</li><li>**всизе = `<size>` ** — Задает размер буфера записи в килобайтах. Это значение может быть *0,5, 1, 2, 4, 8, 16* или *32*. Значение по умолчанию — **32**.</li><li>**Perf = Default** — восстанавливает следующие параметры производительности для значений по умолчанию, *мтипе*, *Retry*, *timeout*, *rsize*или *всизе*. |

### <a name="examples"></a>Примеры

Чтобы отключить сервер для NFS или клиент для NFS, введите:

```
nfsadmin server stop
nfsadmin client stop
```

Чтобы запустить сервер для NFS или клиента для NFS, введите:

```
nfsadmin server start
nfsadmin client start
```

Чтобы задать для параметра сервер для NFS значение не учитывать регистр, введите:

```
nfsadmin server config casesensitive=no
```

Чтобы задать для клиента NFS чувствительность к регистру, введите:

```
nfsadmin client config casesensitive=yes
```

Чтобы отобразить все параметры текущего сервера для NFS или клиента для NFS, введите:

```
nfsadmin server config
nfsadmin client config
```

## <a name="additional-references"></a>Дополнительные ссылки

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)

- [Справочник по командлетам NFS](https://docs.microsoft.com/powershell/module/nfs)

---
title: change user
description: Справочная статья по команде change user, которая изменяет режим установки для сервера узла сеансов удаленный рабочий стол.
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: 6202f024-8cf5-411e-89b1-ee37ff46499d
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 5b17ba6f6245176f09eca301a7b2f44a8f439def
ms.sourcegitcommit: d5e27c1f2f168a71ae272bebf8f50e1b3ccbcca3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/23/2020
ms.locfileid: "86955286"
---
# <a name="change-user"></a>change user

> Область применения: Windows Server (половина ежегодного канала), Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Изменяет режим установки для сервера узла сеансов удаленный рабочий стол.

> [!NOTE]
> В Windows Server 2008 R2 службы терминалов были переименованы на службы удаленных рабочих столов. Чтобы узнать о новых возможностях последней версии, см. статью [новые возможности службы удаленных рабочих столов в Windows Server](/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn283323(v=ws.11)).

## <a name="syntax"></a>Синтаксис

```
change user {/execute | /install | /query}
```

### <a name="parameters"></a>Параметры

| Параметр | Описание |
| --------- | ----------- |
| /EXECUTE | Включает сопоставление ini-файла с домашним каталогом. Это параметр по умолчанию. |
| /install | Отключает сопоставление ini-файлов с домашним каталогом. Все ini-файлы считываются и записываются в системный каталог. Необходимо отключить сопоставление ini-файлов при установке приложений на удаленный рабочий стол сервере узла сеансов. |
| /Query | Отображает текущее значение для сопоставления ini-файла. |
| /? | Отображение справки в командной строке. |

#### <a name="remarks"></a>Комментарии

- Прежде чем устанавливать приложение для создания ini-файлов для приложения в системном каталоге, используйте параметр " **Сменить пользователя/install** ". Эти файлы используются в качестве источника при создании INI-файлов конкретного пользователя. После установки приложения используйте параметр **изменить пользователя/Execute** , чтобы вернуться к стандартному сопоставлению ini-файлов.

- При первом запуске приложения он выполняет поиск своих ini-файлов в домашнем каталоге. Если ini-файлы не найдены в домашнем каталоге, но находятся в системном каталоге, службы удаленных рабочих столов копирует ini-файлы в корневой каталог, гарантируя, что каждый пользователь имеет уникальную копию INI-файлов приложения. Все новые ini-файлы создаются в домашнем каталоге.

- Каждый пользователь должен иметь уникальную копию INI-файлов для приложения. Это не позволяет экземплярам, в которых разные пользователи могут иметь несовместимые конфигурации приложений (например, другие каталоги по умолчанию или разрешения экрана).

- Когда система выполняет **изменение пользователя/install**, происходит несколько действий. Все созданные записи реестра скрыты в разделе **HKEY_LOCAL_MACHINE \Софтваре\микрософт\виндовс Нт\куррентверсион\терминал сервер\инсталл**в подразделе **\софтваре** или в подразделе **\MACHINE** . Подразделы, добавленные в **HKEY_CURRENT_USER** , копируются в подразделе **\софтваре** , а подразделы, добавленные в **HKEY_LOCAL_MACHINE** , копируются в подраздел **\мачине** . Если приложение запрашивает каталог Windows с помощью системных вызовов, таких как Жетвиндовсдиректори, сервер узла сеансов удаленных рабочих столов возвращает каталог systemroot. Если какие-либо записи ini-файла добавляются с помощью системных вызовов, таких как Вритеприватепрофилестринг, они добавляются в ini-файлы в каталоге systemroot.

- Когда система возвращается к **изменению user/execute**и приложение пытается прочитать запись реестра в разделе **HKEY_CURRENT_USER** , которая не существует, службы удаленных рабочих столов проверяет, существует ли копия ключа в подразделе **\терминал сервер\инсталл** . Если это так, подразделы копируются в соответствующее расположение в разделе **HKEY_CURRENT_USER**. Если приложение пытается выполнить чтение из ini-файла, который не существует, службы удаленных рабочих столов ищет этот ini-файл в корневом каталоге системы. Если ini-файл находится в корневом каталоге системы, он копируется в подкаталог \Windows домашнего каталога пользователя. Если приложение запрашивает каталог Windows, сервер узла сеансов удаленных рабочих столов возвращает подкаталог \Windows домашнего каталога пользователя.

- При входе в систему службы удаленных рабочих столов проверяет, являются ли файлы System. ini более новыми, чем ini-файлы на компьютере. Если версия системы более новая, ini-файл будет заменен или объединен с более новой версией. Это зависит от того, установлен ли для этого ini-файла бит ИНИСИНК, 0x40. Предыдущая версия ini-файла переименовывается в Инифиле. CTX. Если значения системного реестра в подразделе **\Терминал сервер\инсталл** новее версии **HKEY_CURRENT_USER**, ваша версия подразделов будет удалена и заменена новыми подразделами из **\терминал сервер\инсталл**.

## <a name="examples"></a>Примеры

- Чтобы отключить сопоставление ini-файлов в домашнем каталоге, введите:

  ```
  change user /install
  ```

- Чтобы включить сопоставление ini-файлов в домашнем каталоге, введите:

  ```
  change user /execute
  ```

- Чтобы отобразить текущую настройку для сопоставления ini-файлов, введите:

  ```
  change user /query
  ```

## <a name="additional-references"></a>Дополнительные ссылки

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)

- [изменить команду](change.md)

- [Справочник по командам служб удаленных рабочих столов (служб терминалов)](remote-desktop-services-terminal-services-command-reference.md)

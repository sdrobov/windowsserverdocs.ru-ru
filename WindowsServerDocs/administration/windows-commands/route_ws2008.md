---
title: route_ws2008
description: Узнайте, как изменять и отображать записи в локальной таблице маршрутизации IP.
ms.custom: na
ms.prod: windows-server
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: afcd666c-0cef-47c2-9bcc-02d202b983b3
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 07/11/2018
ms.openlocfilehash: cc68dd5634ae4832376924c1678dc10a0427f2b2
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71371425"
---
# <a name="route_ws2008"></a>route_ws2008

>Область применения: Windows Server (Semi-Annual Channel), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Отображает и изменяет записи в локальной таблице маршрутизации IP. При использовании без параметров **маршрут** выводит справку.   

## <a name="syntax"></a>Синтаксис  
```  
route [/f] [/p] [<Command> [<Destination>] [mask <Netmask>] [<Gateway>] [metric <Metric>]] [if <Interface>]]  
```  

### <a name="parameters"></a>Параметры  

|Параметр|Описание|  
|-------|--------|  
|/f|Очищает таблицу маршрутизации всех записей, не являющихся маршрутами узла (маршруты с сетевой маской 255.255.255.255), маршрутом сети замыкания на себя (маршруты с назначением 127.0.0.0 и сетевой маской 255.0.0.0) или маршрутом многоадресной рассылки (маршруты с назначением 224.0.0.0 и маска 240.0.0.0). Если используется в сочетании с одной из команд (например, Add, Change или DELETE), таблица удаляется перед выполнением команды.|  
|/p|При использовании с командой Add указанный маршрут добавляется в реестр и используется для инициализации таблицы IP-маршрутизации при каждом запуске протокола TCP/IP. По умолчанию при запуске протокола TCP/IP добавленные маршруты не сохраняются. При использовании с командой print отображается список постоянных маршрутов. Этот параметр игнорируется для всех остальных команд. Постоянные маршруты хранятся в расположении реестра **HKEY_LOCAL_MACHINE \систем\куррентконтролсет\сервицес\ткпип\параметерс\персистентраутес**.|  
|Команда \<>|Указывает команду, которую требуется выполнить. В следующей таблице перечислены допустимые команды.<br /><br />-   **Добавить:** добавляет маршрут.<br />-   **изменение:** изменяет существующий маршрут.<br />-   **Удалить:** удаляет маршрут или маршруты.<br />-   **Печать:** печать маршрута или маршрутов.|  
|> назначения \<|Указывает сетевой адрес маршрута. Назначением может быть IP-адрес сети (где биты узла сетевого адреса имеют значение 0), IP-адрес для маршрута узла или 0.0.0.0 для маршрута по умолчанию.|  
|Маскирование \<маска >|Указывает сетевой адрес маршрута. Назначением может быть IP-адрес сети (где биты узла сетевого адреса имеют значение 0), IP-адрес для маршрута узла или 0.0.0.0 для маршрута по умолчанию.|  
|> шлюза \<|Указывает IP-адрес перенаправления или следующего прыжка, по которому можно получить набор адресов, определяемых назначением сети и маской подсети. Для локально подключенных маршрутов подсети адрес шлюза — это IP-адрес, назначенный интерфейсу, подключенному к подсети. Для удаленных маршрутов, доступных на одном или нескольких маршрутизаторах, адрес шлюза представляет собой напрямую достижимый IP-адрес, назначенный соседнему маршрутизатору.|  
|Метрика \<метрика >|Указывает целочисленную метрику стоимости (от 1 до 9999) для маршрута, который используется при выборе нескольких маршрутов в таблице маршрутизации, наиболее точно соответствующих адресу назначения перенаправляемого пакета. Выбирается маршрут с наименьшей метрикой. Метрика может отражать число прыжков, скорость пути, надежность пути, пропускную способность пути или административные свойства.|  
|Если \<интерфейс >|Указывает индекс интерфейса для интерфейса, для которого целевой объект доступен. Чтобы получить список интерфейсов и их соответствующих индексов интерфейсов, используйте отображение команды route print. Для индекса интерфейса можно использовать либо десятичное, либо шестнадцатеричное значение. Для шестнадцатеричных значений перед шестнадцатеричным числом следует указать 0x. Если параметр if опущен, интерфейс определяется по адресу шлюза.|  
|/?|Отображение справки в командной строке.|  

## <a name="remarks"></a>Замечания  
- Большие значения в столбце **метрик** таблицы маршрутизации являются результатом того, что TCP/IP автоматически определяет метрику маршрутов в таблице маршрутизации на основе конфигурации IP-адреса, маски подсети и шлюза по умолчанию для каждого интерфейса локальной сети. Автоматическое определение метрики интерфейса, включенное по умолчанию, определяет скорость каждого интерфейса и корректирует метрики маршрутов для каждого интерфейса, чтобы самый быстрый интерфейс создавал маршруты с наименьшей метрикой. Чтобы удалить большие метрики, отключите автоматическое определение метрики интерфейса из дополнительных свойств протокола TCP/IP для каждого подключения к локальной сети.  
- Имена могут использоваться для *назначения* , если в файле локальных сетей, хранящемся в папке <strong>systemroot\System32\Drivers\\</strong>и, существует соответствующая запись. Имена могут использоваться для *шлюза* , если они могут быть разрешены по IP-адресу с помощью стандартных методов разрешения имен узлов, таких как запросы службы доменных имен (DNS), использование локального файла Hosts, хранящегося в папке <strong>systemroot\system32\drivers\\</strong>и разрешения имен NetBIOS.  
- Если команда **печатается** или **удаляется**, параметр *шлюза* можно опустить, а для назначения и шлюза можно использовать подстановочные знаки. *Конечным* значением может быть подстановочное значение, заданное звездочкой (*). Если указанное назначение содержит звездочку (\*) или вопросительный знак (?), оно рассматривается как подстановочный знак и печатается или удаляется только в соответствующих маршрутах назначения. Звездочка соответствует любой строке, а вопросительный знак соответствует любому отдельному символу. Например, 10.\*. 1, 192,168.\*, 127.\*и \*224\* являются допустимыми символами-шаблонами звездочки.  
- При использовании недопустимой комбинации значения назначения и маски подсети (маска) отображается сообщение об ошибке "маршрут: неправильная Маска адреса шлюза". Это сообщение об ошибке появляется, если назначение содержит одну или несколько битов, равных 1 в битах, где соответствующий бит маски подсети имеет значение 0. Чтобы протестировать это условие, выразит назначение и маску подсети с помощью двоичной нотации. Маска подсети в двоичной нотации состоит из последовательности из 1 бит, представляющей часть сетевого адреса назначения, и серии из 0 бит, представляющих часть адреса узла назначения. Установите флажок, чтобы определить наличие в назначении битов, для которых задано значение 1, для части назначения, которая является адресом узла (как определено маской подсети).  
- Параметр **/p** поддерживается только в команде Route для windows NT 4,0, Windows 2000, Windows Millennium Edition, Windows XP и windows Server 2003. Этот параметр не поддерживается командой **Route** для Windows 95 или Windows 98.  
- Эта команда доступна, только если протокол Internet Protocol (TCP/IP) установлен в качестве компонента в свойствах сетевого адаптера в окне Сетевые подключения.  

## <a name="BKMK_Examples"></a>Примеров  
Чтобы отобразить все содержимое таблицы IP-маршрутизации, введите:  
```  
route print  
```  
Чтобы отобразить маршруты в таблице IP-маршрутизации, начинающейся с 10, введите:  
```  
route print 10.*  
```  
Чтобы добавить маршрут по умолчанию с адресом шлюза по умолчанию 192.168.12.1, введите:  
```  
route add 0.0.0.0 mask 0.0.0.0 192.168.12.1  
```  
Чтобы добавить маршрут к целевому 10.41.0.0 с маской подсети 255.255.0.0 и адресом следующего прыжка 10.27.0.1, введите:  
```  
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1  
```  
Чтобы добавить постоянный маршрут к целевому 10.41.0.0 с маской подсети 255.255.0.0 и адресом следующего прыжка 10.27.0.1, введите:  
```  
route /p add 10.41.0.0 mask 255.255.0.0 10.27.0.1  
```  
Чтобы добавить маршрут к целевому 10.41.0.0 с маской подсети 255.255.0.0, адрес следующего прыжка 10.27.0.1 и метрику стоимости 7, введите:  
```  
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 metric 7  
```  
Чтобы добавить маршрут к целевому 10.41.0.0 с маской подсети 255.255.0.0, адрес следующего прыжка 10.27.0.1, а также используя интерфейс 0x3 индекса, введите:  
```  
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 if 0x3  
```  
Чтобы удалить маршрут к целевому 10.41.0.0 с маской подсети 255.255.0.0, введите:  
```  
route delete 10.41.0.0 mask 255.255.0.0  
```  
Чтобы удалить все маршруты в таблице IP-маршрутизации, начинающейся с 10, введите:  
```  
route delete 10.*  
```  
Чтобы изменить адрес следующего прыжка маршрута с назначением 10.41.0.0 и маской подсети 255.255.0.0 с 10.27.0.1 на 10.27.0.25, введите:  
```  
route change 10.41.0.0 mask 255.255.0.0 10.27.0.25  
```  

## <a name="additional-references"></a>Дополнительные ссылки  
-   [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)  

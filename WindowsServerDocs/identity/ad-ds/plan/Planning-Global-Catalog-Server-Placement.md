---
ms.assetid: 407d5e81-c04c-4275-9ae9-35f65b4a371a
title: Планирование размещения сервера глобального каталога
author: MicrosoftGuyJFlo
ms.author: joflore
manager: mtillman
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server
ms.technology: identity-adds
ms.openlocfilehash: 5a67e85a239036851d628ad1c261a21f6fbc4566
ms.sourcegitcommit: d5e27c1f2f168a71ae272bebf8f50e1b3ccbcca3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/23/2020
ms.locfileid: "86959436"
---
# <a name="planning-global-catalog-server-placement"></a>Планирование размещения сервера глобального каталога

> Область применения. Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Размещение глобального каталога требует планирования, за исключением случаев, когда у вас есть лес с одним доменом. В лесу с одним доменом настройте все контроллеры домена в качестве серверов глобального каталога. Поскольку каждый контроллер домена хранит только один раздел каталога домена в лесу, настройка каждого контроллера домена в качестве сервера глобального каталога не требует дополнительного использования дискового пространства, загрузки ЦП или трафика репликации. В лесу с одним доменом все контроллеры домена функционируют как виртуальные серверы глобального каталога. то есть они могут отвечать на любые запросы на проверку подлинности или обслуживание. Это особое условие для лесов с одним доменом — проектирование. Запросам проверки подлинности не требуется обращаться к серверу глобального каталога, как это делается при наличии нескольких доменов, и пользователь может быть членом универсальной группы, которая существует в другом домене. Однако только контроллеры домена, назначенные как серверы глобального каталога, могут отвечать на запросы глобального каталога через порт 3268 глобального каталога. Чтобы упростить администрирование в этом сценарии и обеспечить единообразие ответов, назначение всех контроллеров домена в качестве серверов глобального каталога устраняет проблему, с которой контроллеры домена могут отвечать на запросы к глобальному каталогу. В частности, каждый раз, когда пользователь использует Старт\сеарч\фор люди или находит принтеры или расширяет универсальные группы, эти запросы поступают только в глобальный каталог.

В лесах с несколькими доменами серверы глобального каталога упрощают запросы входа пользователей и поиск в масштабах леса. На следующем рисунке показано, как определить, какие расположения требуются для серверов глобального каталога.

![Планирование размещения GC](media/Planning-Global-Catalog-Server-Placement/8fc4777c-47b6-4ee7-b8ad-a04e7c5ee67f.gif)

В большинстве случаев рекомендуется включать глобальный каталог при установке новых контроллеров домена. Применяются следующие исключения:

- Ограниченная пропускная способность. Если ссылка на глобальную сеть (WAN) между удаленным сайтом и узлом концентратора ограничена, можно использовать кэширование членства в универсальных группах на удаленном сайте, чтобы удовлетворить потребности входа пользователей на сайте.
- Несовместимость роли хозяина операций инфраструктуры: не размещайте глобальный каталог на контроллере домена, на котором размещена роль хозяина операций инфраструктуры, в домене, если только все контроллеры домена в домене не являются серверами глобального каталога или лес имеет только один домен.

## <a name="adding-global-catalog-servers-based-on-application-requirements"></a>Добавление серверов глобального каталога на основе требований приложения

Некоторые приложения, такие как Microsoft Exchange, очередь сообщений (также известное как MSMQ), и приложения, использующие DCOM, не доставляют достаточного ответа по скрытому каналу WAN и поэтому требуют высокодоступной инфраструктуры глобального каталога для обеспечения низкой задержки запросов. Определите, работают ли какие-либо приложения, которые плохо работают по медленному каналу WAN, в расположениях или если для расположения требуется Microsoft Exchange Server. Если расположения включают приложения, которые не доставляют достаточного ответа по каналу глобальной сети, необходимо поместить сервер глобального каталога в расположение, чтобы снизить задержку запросов.

> [!NOTE]
> Контроллеры домена только для чтения (RODC) можно успешно повысить до состояния сервера глобального каталога. Однако некоторые приложения с поддержкой каталогов не поддерживают RODC в качестве сервера глобального каталога. Например, ни одна из версий Microsoft Exchange Server не использует RODC. Однако сервер Microsoft Exchange Server работает в средах, включающих RODC, при условии, что доступны доступные для записи контроллеры домена. Exchange Server 2007 фактически игнорирует RODC. Exchange Server 2003 также игнорирует Контроллеры RODC в условиях по умолчанию, когда компоненты Exchange автоматически обнаруживают доступные контроллеры домена. В Exchange Server 2003 не было внесено изменений, чтобы оно было осведомлено о серверах каталогов только для чтения. Таким образом, попытка принудительного использования RODC для служб Exchange Server 2003 и средств управления может привести к непредсказуемому поведению.

## <a name="adding-global-catalog-servers-for-a-large-number-of-users"></a>Добавление серверов глобального каталога для большого числа пользователей

Размещайте серверы глобального каталога во всех расположениях, содержащих более 100 пользователей, чтобы снизить нагрузку сетевых подключений WAN и избежать потери производительности в случае сбоя связи WAN.

## <a name="using-highly-available-bandwidth"></a>Использование пропускной способности высокой доступности

Не нужно размещать глобальный каталог в расположении, которое не содержит приложений, требующих сервера глобального каталога, включает менее 100 пользователей, а также подключен к другому расположению, которое включает сервер глобального каталога по каналу глобальной сети, который является 100% для служб домен Active Directory Services (AD DS). В этом случае пользователи могут получить доступ к серверу глобального каталога по каналу WAN.

Перемещающимся пользователям необходимо обращаться к серверам глобального каталога каждый раз, когда они впервые входят в любое место. Если время входа по каналу глобальной сети недопустимо, поместите глобальный каталог в расположение, которое будет посещено большим числом перемещаемых пользователей.

## <a name="enabling-universal-group-membership-caching"></a>Включение кэширования членства в универсальных группах

Для расположений, содержащих менее 100 пользователей и не включающих большое количество перемещаемых пользователей или приложений, которым требуется сервер глобального каталога, можно развернуть контроллеры домена под Windows Server 2008 и включить кэширование членства в универсальных группах. Убедитесь, что серверы глобального каталога являются не более чем одним прыжком репликации от контроллера домена, на котором включено кэширование членства в универсальных группах, чтобы можно было обновить сведения о универсальной группе в кэше. Сведения о работе кэширования универсальных групп см. в статье [как работает Глобальный каталог](/previous-versions/windows/it-pro/windows-server-2003/cc737410(v=ws.10)).

Для листа, где вы планируете разместить серверы глобального каталога и контроллеры домена с включенным кэшированием универсальных групп, см. статью [вспомогательные материалы для Windows Server 2003 Deployment Kit](https://microsoft.com/download/details.aspx?id=9608), скачайте Job_Aids_Designing_and_Deploying_Directory_and_Security_Services.zip и откройте размещение контроллера домена (DSSTOPO_4.doc). См. сведения о расположениях, в которых необходимо разместить серверы глобального каталога при развертывании корневого домена леса и региональных доменов.

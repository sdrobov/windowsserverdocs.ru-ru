---
title: Диагностика политик ограниченного использования программ
description: Безопасность Windows Server
ms.custom: na
ms.prod: windows-server
ms.reviewer: na
ms.suite: na
ms.technology: security-software-restriction-policies
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 4fd53736-03e7-4bf9-ba90-d1212d93e19a
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/12/2016
ms.openlocfilehash: 8dff3e1542afcc3cba3645b6834981bd6ed33f58
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71407166"
---
# <a name="troubleshoot-software-restriction-policies"></a>Диагностика политик ограниченного использования программ

>Область применения. Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

В этом разделе описываются распространенные проблемы и их решения при устранении неполадок в политиках ограниченного использования программ (SRP), начиная с Windows Server 2008 и Windows Vista.

## <a name="introduction"></a>Введение
Политики ограниченного использования программ — это основанная на групповых политиках функция, которая выявляет программы, работающие на компьютерах в домене, и управляет возможностью выполнения этих программ. Эти политики позволяют создать конфигурацию со строгими ограничениями для компьютеров, где разрешается запуск только определенных приложений. Политики интегрируются с доменными службами Active Directory и групповой политикой, но также могут настраиваться на изолированных компьютерах. Подробные сведения о политиках ограниченного использования программ см. в разделе [Политики ограниченного использования программ](software-restriction-policies.md).

Начиная с Windows Server 2008 R2 и Windows 7, вместо политики SRP или вместе с ней в рамках стратегии управления приложениями можно использовать Windows AppLocker.

### <a name="windows-cannot-open-a-program"></a>Windows не удается открыть программу
Пользователи получают сообщение "Windows не может открыть эту программу, так как она была предотвращена политикой ограниченного использования программ". Для получения дополнительных сведений откройте Просмотр событий или обратитесь к системному администратору». Или в командной строке появится сообщение "система не может выполнить указанную программу".

**Причина.** Был создан уровень безопасности по умолчанию (или правило), чтобы программа была настроена как **запрещенная**, и в результате она не будет запущена.

**Решение**. Подробное описание сообщения см. в журнале событий. В сообщении журнала событий указывается, что программное обеспечение задано как **запрещенное** и какое правило применяется к программе.

### <a name="modified-software-restriction-policies-are-not-taking-effect"></a>Измененные политики ограниченного использования программ не вступают в действие.
**Причина.** Политики ограниченного использования программ, указанные в домене с помощью групповая политика переопределяют все параметры политики, настроенные локально. Это может предположить, что существует параметр политики из домена, переопределяющий параметр политики.

**Причина.** Возможно, групповая политика не обновили параметры политики. Групповая политика периодически применяет изменения параметров политики; Поэтому, скорее всего, изменения политики, внесенные в каталог, еще не обновлены.

**Решения**

1.  Компьютер, на котором вы изменяете политики ограниченного использования программ для сети, должен иметь возможность связаться с контроллером домена. Убедитесь, что компьютер может связаться с контроллером домена.

2.  Обновите политику, выполнив выход из сети и снова войдя в сеть. Если какая-либо политика применяется через групповая политика, то при входе в систему будут обновлены эти политики.

3.  Вы можете обновить параметры политики с помощью программы командной строки gpupdate или выйти из системы, а затем снова войти на компьютер. Для получения наилучших результатов запустите gpupdate, а затем выполните выход из системы и войдите снова на компьютер. Как правило, параметры безопасности обновляются каждые 90 минут на рабочей станции или сервере и каждые 5 минут на контроллере домена. Кроме того, независимо от наличия изменений эти параметры обновляются каждые 16 часов. Это настраиваемые параметры, поэтому интервалы обновления могут различаться в каждом домене.

4.  Проверьте, какие политики применяются. Проверьте политики уровня домена **без параметров переопределения** .

5.  Политики ограниченного использования программ, указанные в домене с помощью групповая политика переопределяют все политики, настроенные локально. Используйте программу командной строки Gpresult, чтобы определить, что именно влияет на политику. Это может предположить, что в домене есть политика, переопределяющая локальный параметр.

6.  Если параметры SRP и AppLocker находятся в одном объекте групповой политики, параметры AppLocker будут иметь приоритет в Windows 7, Windows Server 2008 R2 и более поздних версиях. Рекомендуется использовать параметры политики SRP и AppLocker в разных объектах групповой политики.

### <a name="after-adding-a-rule-through-srp-you-cannot-log-on-to-your-computer"></a>После добавления правила с помощью SRP вы не сможете войти на компьютер
**Причина.** Компьютер получает доступ ко многим программам и файлам при запуске. Возможно, вы случайно настроили одну из этих программ или файлов для **запрещения**. Так как компьютер не может получить доступ к программе или файлу, он не может запуститься должным образом.

**Решение**. Запустите компьютер в защищенном режиме, войдите в систему как локальный администратор, а затем измените политики ограниченного использования программ, чтобы разрешить запуск программы или файла.

### <a name="a-new-policy-setting-is-not-applying-to-a-specific-file-name-extension"></a>Новый параметр политики не применяется к конкретному расширению имени файла
**Причина.** Расширение имени файла отсутствует в списке поддерживаемых типов файлов.

**Решение**. Добавьте расширение имени файла в список типов файлов, поддерживаемых SRP.

Политики ограниченного использования программ устраняют проблему регулирования неизвестного или ненадежного кода. Политики ограниченного использования программ — это параметры безопасности для обнаружения программного обеспечения и управления его возможностью запуска на локальном компьютере, на сайте, в домене или подразделении и могут быть реализованы через объект групповой политики.

### <a name="a-default-rule-is-not-restricting-as-expected"></a>Правило по умолчанию не ограничиваются ожидаемым
**Причина.** Правила, применяемые в определенном порядке, что может привести к переопределению правил по умолчанию определенными правилами. SRP применяет правила в следующем порядке (наиболее конкретно для общего):

1.  Правила хэширования

2.  Правила для сертификатов

3.  Правила для путей

4.  Правила зоны Интернета

5.  Правила по умолчанию

**Решение**. Оцените правила, которые ограничивают приложение, и при необходимости удалите все, кроме правила по умолчанию.

### <a name="unable-to-discover-which-restrictions-are-applied"></a>Не удалось определить, какие ограничения применяются
**Причина.** Не существует очевидной причины непредвиденного поведения, и обновление объекта групповой политики не устранило проблему, поэтому необходимо выполнить дальнейшее исследование.

**Решения**

1.  Проверьте журнал системных событий и выполните фильтрацию по источнику "политика ограниченного использования программ". В записях явно указывается, какое правило реализуется для каждого приложения.

2.  Включить расширенное ведение журнала. Дополнительные сведения см. в разделе [Определение списка allow-deny и инвентаризации приложений для политик ограниченного использования программ](software-restriction-policies.md) .



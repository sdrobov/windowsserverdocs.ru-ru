---
title: Use local resources on Hyper-V virtual machine with VMConnect
description: Описание требований к использованию локальных ресурсов в VMConnect
ms.prod: windows-server
manager: dongill
ms.technology: compute-hyper-v
ms.topic: article
ms.assetid: 18eface5-7518-4c6b-9282-93e2e3e87492
author: kbdazure
ms.author: kathydav
ms.date: 12/06/2016
ms.openlocfilehash: 40dd4076a4d1a57c8a1e999669e589dadeb88cbe
ms.sourcegitcommit: 3a3d62f938322849f81ee9ec01186b3e7ab90fe0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2020
ms.locfileid: "81650127"
---
# <a name="use-local-resources-on-hyper-v-virtual-machine-with-vmconnect"></a>Use local resources on Hyper-V virtual machine with VMConnect

>Область применения. Windows 10, Windows 8.1, Windows Server 2016, Windows Server 2012 R2

Виртуальный диспетчер подключений (VMConnect) позволяет использовать локальные ресурсы виртуальной машины, например съемный USB-накопитель или принтер. Также режим расширенного сеанса позволяет изменить размер окна VMConnect. В этой статье показано, как настроить узел и предоставить виртуальной машине доступ к локальному ресурсу.

Режим расширенного сеанса и текст из буфера обмена доступны только для виртуальных машин под управлением последних версий операционной системы Windows. \(Дополнительные сведения см. в разделе [Требования к использованию локальных ресурсов](#requirements-for-using-local-resources) ниже\). 

Сведения о виртуальных машинах под управлением Ubuntu см. в статье [Changing Ubuntu Screen Resolution in a Hyper-V VM](https://blogs.msdn.microsoft.com/virtual_pc_guy/2014/09/19/changing-ubuntu-screen-resolution-in-a-hyper-v-vm/) (Изменение разрешения экрана Ubuntu на виртуальной машине Hyper-V). 
  
## <a name="turn-on-enhanced-session-mode-on-a-hyper-v-host"></a>Включение режима расширенного сеанса на узле Hyper-V  
Если узел Hyper-V работает под управлением Windows 10 или Windows 8.1, режим расширенного сеанса на нем включен по умолчанию, и тогда этот раздел можно пропустить и перейти к следующему. Но если узел работает под управлением Windows Server 2016 или Windows Server 2012 R2, сначала выполните следующее. 
  
Включите режим расширенного сеанса.

1.  Подключитесь к компьютеру, на котором размещена виртуальная машина.  
  
2.  В диспетчере Hyper-V выберите имя компьютера узла.  
  
    ![Снимок экрана, на котором показано имя главного компьютера в разделе диспетчера Hyper-V на панели слева.](media/Hyper-V-HyperVManager-HostNameSelected.png)  
  
3.  Выберите **Параметры Hyper-V**.  
  
    ![Снимок экрана, на котором показаны параметры Hyper-V в разделе "Действия" на панели справа.](media/HyperV-ActionsHyperVSettings.png)  
  
4.  В разделе **Сервер**выберите **Политика режима расширенного сеанса**.  
  
    ![Снимок экрана с параметром "Политика режима расширенного сеанса" в разделе "Безопасность".](media/Hyper-V-Settings-ServerEnhancedSessionModePolicy.png)  
  
5.  Установите флажок **Разрешить режим расширенного сеанса** .  
  
    ![Снимок экрана с флажком "Разрешить режим расширенного сеанса" для политики режима расширенного сеанса.](media/Hyper-V-Settings-EnhancedSessionModePolicyCheckBox.png)  
  
6.  В разделе **Пользователь**выберите **Режим расширенного сеанса**.  
  
    ![Снимок экрана с параметром "Режим расширенного сеанса" в разделе "Пользователь". ](media/Hyper-V-Settings-UserEnhancedSessionMode.png)  
  
7.  Установите флажок **Разрешить режим расширенного сеанса** .  
  
8.  Нажмите кнопку **ОК**.  
  
## <a name="choose-a-local-resource"></a>Выбор локального ресурса

К локальным ресурсам относятся принтеры, буфер обмена и локальный диск на компьютере, на котором выполняется VMConnect. Дополнительные сведения см. вразделе [Требования к использованию локальных ресурсов](#requirements-for-using-local-resources) ниже.  
  
Чтобы выбрать локальный ресурс, выполните следующее.
  
1.  Откройте VMConnect.  
  
2.  Выберите виртуальную машину, к которой нужно подключиться.  
  
3.  Нажмите кнопку **Показать параметры**.  
  
    ![Снимок экрана, где отмечен элемент вызова параметров в нижнем левом углу диалогового окна.](media/HyperV-VMConnect-DisplayConfig.png)  
  
4.  Выберите **Локальные ресурсы**.  
  
    ![Снимок экрана, где отмечена вкладка "Локальные ресурсы".](media/HyperV-VMConnect-DisplayConfig-LocalResources.png)  
  
5.  Нажмите кнопку **Дополнительно**.  
  
    ![Снимок экрана, где отмечена кнопка "Дополнительно".](media/HyperV-VMConnect-DisplayConfig-LocalResourcesMore.png)  
  
6.  Выберите диск, который нужно использовать на виртуальной машине, и нажмите кнопку **ОК**.  
  
    ![Снимок экрана, на котором показаны локальные ресурсы и диски, которые можно выбрать.](media/HyperV-VMConnect-Settings-LocalResourcesDrives.png)  
  
7.  Выберите **Сохранить мои параметры для подключения к этой виртуальной машине**.  
  
    ![Снимок экрана, где отмечен флажок для выбора этого параметра.](media/HyperV-VMConnect-SaveSettings.png)  
  
8.  Нажмите кнопку **Подключить**.  
  
## <a name="edit-vmconnect-settings"></a>Изменение параметров VMConnect

Для изменения параметров подключения VMConnect выполните следующую команду в командной строке или в Windows PowerShell:  
  
`VMConnect.exe <ServerName> <VMName> /edit`  
  
> [!Note]
> Для этого может потребоваться командная строка с повышенными привилегиями.
  
## <a name="requirements-for-using-local-resources"></a>Требования к использованию локальных ресурсов

Требования, позволяющие использовать локальные ресурсы компьютера на виртуальной машине:  
  
-   на узле Hyper-V должны быть включены параметры **Политика расширенного режима сеанса** и **Режим расширенного сеанса**;  
  
-   компьютер, на котором выполняется VMConnect, должен работать под управлением Windows 10, Windows 8.1, Windows Server 2016 или Windows Server 2012 R2;  
  
-   на виртуальной машине должны быть включены службы удаленных рабочих столов и запущена гостевая операционная система Windows 10, Windows 8.1, Windows Server 2016 или Windows Server 2012 R2.  
  
Если компьютер, где работает VMConnect, и виртуальная машина соответствуют этим условиям, вы можете использовать любой из следующих локальных ресурсов, если они присутствуют в системе:  
  
-   настройка отображения;  
  
-   звук;
  
-   принтеры;  
  
-   буферы обмена для копирования и вставки;  
  
-   смарт-карты;  
  
-   USB-устройства;  
  
-   диски;  
  
-   поддерживаемые самонастраивающиеся устройства;  
  
## <a name="why-use-a-computers-local-resources"></a>Для чего можно использовать локальные ресурсы компьютера?
Локальные ресурсы компьютера можно использовать для выполнения следующих задач:  
  
-   устранение неполадок виртуальной машины без сетевого подключения к виртуальной машине;  
  
-   копирование файлов в виртуальную машину и из нее аналогично копированию с помощью подключения удаленного рабочего стола (RDP).  
  
-   вход в систему виртуальной машины с использованием смарт-карты;  
  
-   печать с виртуальной машины на локальном принтере;  
  
-   тестирование и устранение неполадок приложений разработчиков, требующих USB или перенаправление звука без использования RDP.  
  
## <a name="see-also"></a>См. также  
[Подключение к виртуальной машине](https://technet.microsoft.com/library/cc742407.aspx)  
[Should I create a generation 1 or 2 virtual machine in Hyper-V?](../plan/Should-I-create-a-generation-1-or-2-virtual-machine-in-Hyper-V.md) (Следует ли создавать виртуальные машины 1-го и 2-го поколения в Hyper-V?).



---
ms.assetid: e34622ff-b2d0-4f81-8d00-dacd5d6c215e
title: Технический справочник по службе времени Windows
description: Служба времени W32Time обеспечивает синхронизацию сетевых часов для компьютеров без необходимости в расширенной конфигурации. Служба W32Time необходима для успешной работы проверки подлинности Kerberos версии 5 и, следовательно, для проверки подлинности на основе AD DS.
author: dcuomo
ms.author: dacuo
ms.date: 05/08/2018
ms.topic: article
ms.prod: windows-server
ms.technology: networking
ms.openlocfilehash: e877cb6da43c7bffbfcb89bb4e51fe2d36e1b88e
ms.sourcegitcommit: d99bc78524f1ca287b3e8fc06dba3c915a6e7a24
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/27/2020
ms.locfileid: "87182200"
---
# <a name="windows-time-service-technical-reference"></a>Технический справочник по службе времени Windows
>Применяется к: Windows Server 2016, Windows Server 2012 R2, Windows Server 2012, Windows 10 или более поздних версий

Служба времени W32Time обеспечивает синхронизацию сетевых часов для компьютеров без необходимости в расширенной конфигурации. Служба W32Time необходима для успешной работы проверки подлинности Kerberos версии 5 и, следовательно, для проверки подлинности на основе AD DS. Любое приложение, поддерживающее Kerberos, включая большинство служб безопасности, зависит от синхронизации времени между компьютерами, участвующими в запросе проверки подлинности. Контроллеры доменов AD DS также должны иметь синхронизированные часы, чтобы обеспечивать точную репликацию данных.

> [!NOTE]
> В Windows Server 2003 и Microsoft Windows 2000 Server служба каталогов называется "служба каталогов Active Directory" В Windows Server 2008 и Windows Server 2008 R2 служба каталогов называется "доменные службы Active Directory" (AD DS). Остальная часть этой статьи относится к AD DS, но эти сведения применимы также и к доменным службам Active Directory в Windows Server 2016.

Служба W32Time реализована в библиотеке динамической компоновки с именем W32Time.dll, которая по умолчанию устанавливается в папку **%Systemroot%\System32**. Служба W32Time.dll изначально разрабатывалась для Windows 2000 Server и поддержки спецификации протоколом проверки подлинности Kerberos версии 5, требующей синхронизации в сети. Начиная с Windows Server 2003, Служба W32Time.dll обеспечивает более высокую точность синхронизации часов в сети по сравнению с операционной системой Windows Server 2000. Кроме того, в Windows Server 2003 служба W32Time.dll поддерживала широкий набор аппаратных устройств и протоколов сетевого времени через поставщики времени.

Несмотря на то, что изначально планировалось предоставлять синхронизацию часов только для проверки подлинности Kerberos, многие текущие приложения используют метки времени для обеспечения согласованности транзакций, записи времени важных событий и другой критически важной для бизнеса информации, которая зависит от времени.  Эти приложения получают преимущества от синхронизации времени между компьютерами, предоставляемыми службой времени Windows.

## <a name="importance-of-time-protocols"></a>Важность протоколов времени
Протоколы времени взаимодействуют между двумя компьютерами для обмена сведениями о времени, а затем используют эти сведения для синхронизации часов. При использовании протокола времени службы времени Windows клиент запрашивает сведения о времени с сервера и синхронизирует свои часы на основе полученных данных.

Служба времени Windows использует протокол NTP для синхронизации времени по сети. NTP — это протокол времени в Интернете, включающий алгоритмы правил работы, необходимые для синхронизации часов. NTP является более точным протоколом времени, чем Simple Network Time Protocol (SNTP), который используется в некоторых версиях Windows; однако W32Time продолжает поддерживать SNTP для обратной совместимости с компьютерами, на которых работают службы времени на основе SNTP, такие как Windows 2000.
## <a name="where-to-find-windows-time-service-configuration-related-information"></a>Поиск сведений, связанных с настройкой службы времени Windows
В этом руководстве **не** затрагивается настройка службы времени Windows. В Microsoft TechNet и в базе знаний Майкрософт есть несколько разделов, которые описывают процедуры настройки службы времени Windows. Если вам требуется информация о конфигурации, вы сможете найти ее в следующих статьях.
-   Сведения о том, как настроить службу времени Windows для эмулятора основного контроллера домена в корне леса, см. в этих статьях:

    -   [Configure the Windows Time service on the PDC emulator in the Forest Root Domain](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc731191%28v=ws.10%29) (Настройка службы времени Windows для эмулятора основного контроллера домена в корневом домене леса);

    -   [Configuring a time source for the forest](/previous-versions/windows/it-pro/windows-server-2008-r2-and-2008/cc794823%28v%3dws.10%29) (Настойка источника времени для леса);

    -   Статья 816042 базы знаний Майкрософт [Как настроить полномочный сервер времени в операционной системе Windows Server](https://go.microsoft.com/fwlink/?LinkID=60402), в которой описаны параметры конфигурации для компьютеров под управлением Windows Server 2008 R2, Windows Server 2008, Windows Server 2003 и Windows Server 2003 R2.

-   Сведения о настройке службы времени Windows на любом клиенте- или сервере-члене домена или даже на контроллерах домена, которые не настроены в качестве эмулятора основного контроллера в корне леса, см. в [этой статье](/previous-versions/windows/it-pro/windows-server-2008-r2-and-2008/cc816884%28v%3dws.10%29).

    > [!WARNING]
    > Некоторые приложения могут требовать наличия высокоточных служб времени на компьютерах, где они работают. В этом случае вы можете настроить источник времени, задаваемый вручную, но имейте в виду, что служба времени Windows не предназначена для работы в качестве источника с высокой точностью времени. Убедитесь, что вы знаете об ограничениях поддержки для сред высокой точности, описанных в статье 939322 базы знаний Майкрософт: [Support boundary for high-accuracy time](support-boundary.md) (Граница области поддержки для высокоточного времени).

-   Чтобы настроить службу времени Windows на всех клиентских и серверных компьютерах под управлением Windows, которые настроены как члены рабочей группы, а не члены домена, см. статью [Configure a Manual Time Source for a Selected Client Computer](/previous-versions/windows/it-pro/windows-server-2008-r2-and-2008/cc816656%28v%3dws.10%29) (Настройка источника времени вручную для выбранного клиентского компьютера).

-   Сведения о настройке службы времени Windows на главном компьютере, на котором выполняется виртуальная среда, см. в статье 816042 базы знаний Майкрософт [Как настроить полномочный сервер времени в операционной системе Windows Server](https://go.microsoft.com/fwlink/?LinkID=60402). Если вы работаете с продуктом виртуализации не от Майкрософт, обязательно ознакомьтесь с документацией поставщика для этого продукта.

-   Чтобы настроить службу времени Windows на контроллере домена, работающем в виртуальной машине, мы рекомендуем частично отключить синхронизацию времени между хост-системой и гостевой операционной системой, выполняющей роль контроллера домена. Это позволяет гостевому контроллеру домена синхронизировать время для иерархии домена, но предохраняет его от отклонения во времени при восстановлении из сохраненного состояния. Дополнительные сведения см. в статье 976924 базы знаний Майкрософт [You receive Windows Time Service event IDs 24, 29, and 38 on a virtualized domain controller that is running on a Windows Server 2008-based host server with Hyper-V](https://go.microsoft.com/fwlink/?LinkID=192236) (Вы получаете события с кодами 24, 29 или 38 от службы времени Windows на виртуализированном контроллере домена, который выполняется на сервере узла под управлением Windows Server 2008 с Hyper-V) и статье [Deployment Considerations for Virtualized Domain Controllers](https://go.microsoft.com/fwlink/?LinkID=192235) (Рекомендации по развертыванию виртуализованных контроллеров домена).

-   Чтобы настроить службу времени Windows на контроллере домена, работающем в качестве эмулятора основного котроллера в корне леса, который также работает на виртуальном компьютере, следуйте тем же инструкциям, что и для физического компьютера, как описано в статье [Configure the Windows Time service on the PDC emulator in the Forest Root Domain](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc731191%28v=ws.10%29) (Настройка службы времени Windows для эмулятора основного контроллера домена в корневом домене леса).

-   Чтобы настроить службу времени Windows на рядовом сервере, работающем как виртуальный компьютер, используйте иерархию времени домена, как описано в статье [Configure a Client Computer for Automatic Domain Time Synchronization](/previous-versions/windows/it-pro/windows-server-2008-r2-and-2008/cc816884%28v%3dws.10%29) (Настройка клиентского компьютера для автоматической синхронизации времени домена).


> [!IMPORTANT]
> До Windows Server 2016 служба W32Time не предназначалась для поддержки зависящих от времени потребностей приложений.  Не теперь обновления Windows Server 2016 позволяют реализовать в домене решение с точностью 1 мс.  Дополнительные сведения см. в статьях [Accurate Time for Windows Server 2016](accurate-time.md) (Точное время для Windows Server 2016) и [Support boundary for high-accuracy time](support-boundary.md) (Граница области поддержки для сверхточного времени)

## <a name="related-topics"></a>Связанные темы
- [Точное время в Windows 2016](accurate-time.md)
- [Улучшения Windows Server 2016](windows-server-2016-improvements.md) (раздел о службе времени)
- [Принципы работы службы времени Windows](How-the-Windows-Time-Service-Works.md)
- [Инструменты и параметры службы времени Windows](Windows-Time-Service-Tools-and-Settings.md)
- [Граница области поддержки для настройки службы времени Windows в высокоточных средах](support-boundary.md)
- [Статья 902229 базы знаний Майкрософт](https://go.microsoft.com/fwlink/?LinkId=186066)

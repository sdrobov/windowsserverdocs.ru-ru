---
title: Включение перечисления на основе доступа для пространства имен
description: В этой статье рассматривается, как включить перечисление на основе доступа для пространства имен.
ms.date: 6/5/2017
ms.prod: windows-server
ms.technology: storage
ms.topic: article
author: JasonGerend
manager: brianlic
ms.author: jgerend
ms.openlocfilehash: 04b023a931f8d66205a07f05bb8d3e955f8b83ca
ms.sourcegitcommit: d5e27c1f2f168a71ae272bebf8f50e1b3ccbcca3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/23/2020
ms.locfileid: "86964076"
---
# <a name="enable-access-based-enumeration-on-a-namespace"></a>Включение перечисления на основе доступа для пространства имен

> Область применения: Windows Server 2019, Windows Server (половина ежегодного канала), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012, Windows Server 2008 R2, Windows Server 2008

Перечисление на основе доступа позволяет скрыть файлы и папки, на доступ к которым у пользователей нет разрешения. По умолчанию для пространств имен DFS эта функция отключена. Включить перечисление на основе доступа для папок DFS можно с помощью оснастки "Управление DFS". Для управления перечислением на основе доступа файлов и папок в конечных объектах папок необходимо включить перечисление на основе доступа в каждой общей папке с помощью оснастки "Управление общими ресурсами и хранилищами".

Для включения перечисления на основе доступа для пространства имен все серверы пространства имен должны работать под управлением Windows Server 2008 или более поздней версии. Кроме того, для доменных пространств имен должен использоваться режим Windows Server 2008. Сведения о требованиях режима Windows Server 2008 см. в разделе [Выбор типа пространства имен](choose-a-namespace-type.md).

В некоторых средах включение перечисления на основе доступа может привести к высокой загрузке ЦП на сервере и замедлением отклика для пользователей.

> [!NOTE]
> Если вы обновите режим работы домена до Windows Server 2008 при наличии существующих доменных пространств имен, оснастка "Управление DFS" позволит включить перечисление на основе доступа для этих пространств имен. Однако вы не сможете редактировать разрешения для скрытия папок от каких-либо групп или пользователей, если перенесете пространство имен в режим Windows Server 2008. Дополнительные сведения см. в разделе [Перенос доменного пространства имен в режим Windows Server 2008](migrate-a-domain-based-namespace-to-windows-server-2008-mode.md).


Чтобы использовать перечисление на основе доступа с пространствами имен DFS, необходимо выполнить следующие действия:

-   Включение перечисления на основе доступа для пространства имен
-   Задание пользователей и групп, которые могут просматривать отдельные папки DFS


> [!WARNING]
> Перечисление на основе доступа не мешает пользователям переходить по ссылке на конечный объект папки, если они уже знают путь DFS. Помешать доступу пользователя к конечному объекту папки могут только разрешения для общего ресурса или разрешения файловой системы NTFS, относящиеся к самому конечному объекту папки (общей папке). Разрешения для папок DFS используются только для отображения или скрытия папок DFS, а не для управления доступом, что делает доступ на чтение единственным применимым разрешением на уровне папки DFS. Дополнительные сведения см. в разделе [Использование унаследованных разрешений с перечислением на основе доступа](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd834874(v=ws.11))

<br />
Включить перечисление на основе доступа для пространства имен можно с помощью интерфейса Windows или с помощью командной строки.

## <a name="to-enable-access-based-enumeration-by-using-the-windows-interface"></a>Включение перечисления на основе доступа с помощью интерфейса Windows

1.  В узле **Пространства имен** дерева консоли щелкните правой кнопкой мыши соответствующее пространство имен и выберите **Свойства**.

2.  Перейдите на вкладку **Дополнительно** и установите флажок **Включить перечисление на основе доступа для этого пространства имен**.

## <a name="to-enable-access-based-enumeration-by-using-a-command-line"></a>Включение перечисления на основе доступа с помощью командной строки

1.  Откройте окно командной строки на сервере, где установлена служба роли **Распределенная файловая система** или компонент **Средства распределенной файловой системы**.

2.  Введите следующую команду, где *<корень пространства имен \_>* является корнем пространства имен:

    ```
    dfsutil property abe enable \\ <namespace_root>
    ```

> [!TIP]
> Для управления перечислением на основе доступа для пространства имен с помощью Windows PowerShell используйте командлеты [Set-DfsnRoot](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd834874(v=ws.11)), [Grant-DfsnAccess](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd834874(v=ws.11)) и [Revoke-DfsnAccess](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd834874(v=ws.11)). Модуль DFSN Windows PowerShell был введен в Windows Server 2012.

Управлять тем, какие пользователи и группы могут просматривать отдельные папки DFS, можно с помощью интерфейса Windows или с помощью командной строки.

## <a name="to-control-folder-visibility-by-using-the-windows-interface"></a>Управление видимостью папки с помощью интерфейса Windows

1.  В узле **Пространства имен** дерева консоли найдите папку с конечными объектами, управлять видимостью которых вы хотите, щелкните ее правой кнопкой мыши и выберите **Свойства**.

2.  Перейдите на вкладку **Дополнительно**.

3.  Нажмите кнопку **Задать явные разрешения на просмотр для папки DFS** и затем **Настроить разрешения просмотра**.

4.  Добавьте или удалите группы или пользователей, нажимая кнопку **Добавить** или **Удалить**.

5.  Чтобы разрешить пользователям видеть папку DFS, выберите группу или пользователя и установите флажок **Разрешить**.

    Чтобы скрыть папку от группы или пользователя, выберите группу или пользователя и установите флажок **Запретить**.

## <a name="to-control-folder-visibility-by-using-a-command-line"></a>Управление видимостью папки с помощью командной строки

1. Откройте окно командной строки на сервере, на котором установлена служба роли **Распределенная файловая система** или **средства распределенная файловая система** .

2. Введите следующую команду, где * &lt; &gt; дфспас* — путь к папке DFS (Link), *<\\ учетной записи домена>* является именем группы или учетной записи пользователя, а *(...)* заменяется дополнительными записями управления доступом (ACE):

   ```
   dfsutil property sd grant <DFSPath> DOMAIN\Account:R (...) Protect Replace
   ```

   Например, чтобы заменить существующие разрешения на разрешения, которые позволяют группам "Администраторы домена" и " \\ преподаватели Contoso" читать (R) доступ к \\ папке contoso. оффице\публик\траининг, введите следующую команду:

   ```
   dfsutil property sd grant \\contoso.office\public\training "CONTOSO\Domain Admins":R CONTOSO\Trainers:R Protect Replace
   ```

3. Для выполнения дополнительных задач в командной строке используйте следующие команды:


| Команда | Описание |
|---|---|
|[Dfsutil property sd deny](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd759150(v=ws.11))|Запрещает группе или пользователю просмотр папки.|
|[Dfsutil property sd reset](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd759150(v=ws.11)) |Удаляет с папки все разрешения.|
|[Dfsutil property sd revoke](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd759150(v=ws.11))| Удаляет с папки элемент управления доступом группы или пользователя. |

## <a name="additional-references"></a>Дополнительные ссылки

-   [Создание пространства имен DFS](create-a-dfs-namespace.md)
-   [Делегирование прав управления пространствами имен DFS](delegate-management-permissions-for-dfs-namespaces.md)
-   [Установка DFS](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc731089(v=ws.11))
-   [Использование наследуемых разрешений с перечислением на основе доступа](using-inherited-permissions-with-access-based-enumeration.md)

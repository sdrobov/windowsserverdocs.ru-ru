---
title: Обзор файловой системы NTFS
description: Описание файловой системы NTFS.
ms.prod: windows-server
ms.topic: article
author: JasonGerend
ms.author: jgerend
ms.technology: storage
ms.date: 06/17/2019
ms.localizationpriority: medium
ms.openlocfilehash: a390521cbd4d5dd676662d3dc41062792f1fa945
ms.sourcegitcommit: d5e27c1f2f168a71ae272bebf8f50e1b3ccbcca3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/23/2020
ms.locfileid: "86965146"
---
# <a name="ntfs-overview"></a>Обзор файловой системы NTFS

>Применяется к: Windows 10, Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012, Windows Server 2008 R2, Windows Server 2008

NTFS — основная файловая система в последних версиях Windows и Windows Server — предоставляет полный набор возможностей, включая дескрипторы безопасности, шифрование, дисковые квоты и расширенные метаданные. Ее можно использовать с общими томами кластера (CSV) для предоставления томов непрерывной доступности, доступ к которым можно осуществлять одновременно с нескольких узлов отказоустойчивого кластера.

Дополнительные сведения о новых и измененных функциональных возможностях в файловой системе NTFS в Windows Server 2012 R2 см. в статье [What's New in NTFS](/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn466520(v%3dws.11)) (Новые возможности файловой системы NTFS). Дополнительные сведения о функциях см. в [этом разделе](#additional-information) далее в этой статье. Дополнительные сведения о новой системе Resilient File System (ReFS) см. в статье [Resilient File System (ReFS) overview](../refs/refs-overview.md) (Обзор файловой системы ReFS).

## <a name="practical-applications"></a>Практическое применение

### <a name="increased-reliability"></a>повышенная надежность;

NTFS использует файл журнала и сведения о контрольных точках для восстановления согласованности файловой системы при перезагрузке компьютера после сбоя системы. После ошибки поврежденного сектора NTFS динамически изменяет конфигурацию кластера, содержащего поврежденный сектор, выделяет новый кластер для данных, отмечает исходный кластер как поврежденный и больше не использует старый кластер. Например, после сбоя сервера NTFS может восстановить данные путем воспроизведения файлов журнала.

NTFS непрерывно отслеживает и исправляет временные проблемы повреждения в фоновом режиме, не переводя том в автономный режим (эта функция, введенная в Windows Server 2008, известна как [NTFS с самовосстановлением](/previous-versions/windows/it-pro/windows-server-2008-r2-and-2008/cc771388(v=ws.10))). При значительных проблемах с повреждением программа Chkdsk в Windows Server 2012 и более поздних версиях сканирует и анализирует диск, пока том подключен, ограничивая время автономной работы временем, необходимым для восстановления целостности данных в томе. Когда NTFS используется с CSV, простои не требуются. Дополнительные сведения см. в статье [NTFS Health and Chkdsk](/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831536(v%3dws.11)) (Работоспособность NTFS и Chkdsk).

### <a name="increased-security"></a>Повышенная безопасность

- **Безопасность на основе списка управления доступом (ACL) для файлов и папок**. NTFS позволяет устанавливать разрешения для файла или папки, указывать группы и пользователей, чей доступ требуется ограничить или разрешить, и выбрать тип доступа.

- **Поддержка шифрования диска BitLocker**. Шифрование диска BitLocker обеспечивает дополнительную безопасность важных системных сведений и других данных, хранящихся на томах NTFS. Начиная с Windows Server 2012 R2 и Windows 8.1, BitLocker поддерживает шифрование устройств на компьютерах с архитектурой x86 и x64 с доверенным платформенным модулем, который поддерживает режим ожидания с подключением (ранее доступный только на устройствах Windows RT). Шифрование устройств помогает защитить данные на компьютерах под управлением Windows и помогает предотвратить доступ пользователей-злоумышленников к системным файлам, которые они используют для обнаружения пароля, или к диску путем физического удаления его с компьютера и установки в другой компьютер. Дополнительные сведения см. в статье [What's New in BitLocker](/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn306081(v%3dws.11)) (Новые возможности BitLocker).

- **Поддержка больших томов**. NTFS поддерживает тома размером до 256 ТБ. Поддерживаемые размеры томов зависят от размера кластеров и их количества. Для кластеров (2<sup>32</sup> –1) (максимальное число кластеров, поддерживаемое NTFS) поддерживаются следующие размеры томов и файлов.

  |Размер кластера|Самый крупный том|Самый крупный файл|
  |---|---|---|
  |4 КБ (размер по умолчанию)|16 ТБ|16 ТБ|
  |8 КБ|32 ТБ|32 ТБ|
  |16 КБ|64 ТБ|64 ТБ|
  |32 КБ|128 ТБ|128 ТБ|
  |64 КБ (максимальный размер)|256 ТБ|256 ТБ|

>[!IMPORTANT]
>Службы и приложения могут накладывать дополнительные ограничения на размер файлов и томов. Например, ограничение размера тома составляет 64 ТБ, если вы используете функцию предыдущих версий или приложение резервного копирования, которое использует моментальные снимки службы теневого копирования томов (и не используете сеть SAN или RAID). Тем не менее, может потребоваться использовать тома меньшего размера в зависимости от рабочей нагрузки и производительности хранилища.

### <a name="formatting-requirements-for-large-files"></a>Требования к форматированию для больших файлов

Есть новые рекомендации по форматированию томов в отношении правильного расширения больших файлов VHDX. В ходе форматирования томов, которые будут использоваться при дедупликации данных, или при размещении очень больших файлов, таких как файлы VHDX размером больше 1 ТБ, используйте в Windows PowerShell командлет **Format-Volume** со следующими параметрами.

|Параметр|Описание|
|---|---|
|-AllocationUnitSize 64KB|Задает размер единицы распределения NTFS 64 КБ.|
|-UseLargeFRS|Включает поддержку сегментов записей больших файлов (FRS). Это необходимо для увеличения количества экстентов, допустимых для каждого файла в томе. Для больших записей FRS ограничение увеличивается с примерно 1 500 000 до 6 000 000 экстентов.|

Например, следующий командлет форматирует диск D как том NTFS с включенными FRS и размером единицы распределения 64 КБ.

```PowerShell
Format-Volume -DriveLetter D -FileSystem NTFS -AllocationUnitSize 64KB -UseLargeFRS
```

Можно также использовать команду **format**. В системной командной строке введите следующую команду, где **/L** форматирует большой том FRS, а **/A:64k** задает размер единицы распределения 64 КБ:

```PowerShell
format /L /A:64k
```

### <a name="maximum-file-name-and-path"></a>Максимальная длина имени файла и пути к файлу

NTFS поддерживает длинные имена файлов и пути увеличенной длины со следующими максимальными значениями:

- **Поддержка длинных имен файлов с обратной совместимостью**. NTFS допускает длинные имена файлов, сохраняя псевдоним 8.3 на диске (в кодировке Юникод), чтобы обеспечить совместимость с файловыми системами, которые накладывают ограничение 8.3 на имена и расширения файлов. При необходимости (по соображениям производительности) можно выборочно отключить именование 8.3 на отдельных томах NTFS в Windows Server 2008 R2, Windows 8 и более поздних версиях операционной системы Windows.
  В Windows Server 2008 R2 и более поздних версий короткие имена по умолчанию отключены при форматировании тома с помощью операционной системы. Для совместимости приложений на системном томе все еще включены короткие имена.

- **Поддержка путей увеличенной длины**. Многие функции API Windows поддерживают версии Юникода, позволяющие использовать расширенный путь длиной приблизительно 32 767 символов, а не ограниченный по длине в 260 символов, что определяется параметром MAX\_PATH. Подробные требования к именам файлов и формату путей, а также рекомендации по реализации путей увеличенной длины см. в статье [Naming Files, Paths, and Namespaces](/windows/win32/fileio/naming-a-file) (Имена файлов, пути и пространства имен).

- **Кластерное хранилище**. При использовании в отказоустойчивых кластерах NTFS поддерживает постоянно доступные тома, к которым могут одновременно обращаться несколько узлов кластера при использовании совместно с файловой системой CSV. Дополнительные сведения см. в статье [Use Cluster Shared Volumes in a Failover Cluster](../../failover-clustering/failover-cluster-csvs.md) (Использование общих томов кластера в отказоустойчивом кластере).

### <a name="flexible-allocation-of-capacity"></a>Динамическое выделение емкости

Если пространство тома ограничено, NTFS предоставляет следующие возможности для работы с емкостью хранилища сервера:

- применение дисковых квот для отслеживания и контроля использования дискового пространства в томах NTFS для отдельных пользователей;
- сжатие файловой системы, чтобы максимально увеличить объем хранимых данных;
- увеличение размера тома NTFS возможно путем добавления нераспределенного пространства с того же или с другого диска;
- подключение тома к любой пустой папке на локальном томе NTFS, если использованы все буквы диска или необходимо создать дополнительное пространство, доступное из существующей папки.

## <a name="additional-information"></a>Дополнительные сведения

- [Cluster size recommendations for ReFS and NTFS](https://techcommunity.microsoft.com/t5/Storage-at-Microsoft/Cluster-size-recommendations-for-ReFS-and-NTFS/ba-p/425960) (Рекомендации по размеру кластера для ReFS и NTFS).
- [Resilient File System (ReFS) overview](../refs/refs-overview.md) (Обзор файловой системы ReFS)
- [What's New in NTFS for Windows Server](/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn466520(v%3dws.11)) (Новые возможности файловой системы NTFS для Windows Server)
- [What's New in NTFS](/previous-versions/windows/it-pro/windows-server-2008-r2-and-2008/ff383236(v=ws.10)) (Новые возможности файловой системы NTFS)
- [NTFS Health and Chkdsk](/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831536(v%3dws.11)) (Работоспособность NTFS и Chkdsk)
- [Self-Healing NTFS](/previous-versions/windows/it-pro/windows-server-2008-r2-and-2008/cc771388(v=ws.10)) (NTFS с самовосстановлением) (введенная в Windows Server 2008)
- [Transactional NTFS](/previous-versions/windows/it-pro/windows-server-2008-r2-and-2008/cc730726(v%3dws.10)) (Транзакционная NTFS) (введенная в Windows Server 2008)
- [Хранилище в Windows Server](../storage.yml)

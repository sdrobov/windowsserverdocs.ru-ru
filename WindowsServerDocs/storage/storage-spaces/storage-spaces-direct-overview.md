---
title: Обзор локальных дисковых пространств
ms.prod: windows-server
ms.author: cosdar
manager: dongill
ms.technology: storage-spaces
ms.topic: article
author: cosmosdarwin
ms.date: 06/26/2019
ms.assetid: 8bd0d09a-0421-40a4-b752-40ecb5350ffd
description: Общие сведения о Локальные дисковые пространства, компоненте Windows Server, который позволяет выполнять кластерные серверы с внутренним хранилищем в аппаратно-определенном решении для хранения.
ms.localizationpriority: medium
ms.openlocfilehash: 4fb8700935306cbd007ab4afc61cf3eb54227130
ms.sourcegitcommit: acfdb7b2ad283d74f526972b47c371de903d2a3d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/05/2020
ms.locfileid: "87768949"
---
# <a name="storage-spaces-direct-overview"></a>Обзор локальных дисковых пространств

>Применяется к: Windows Server 2019, Windows Server 2016

Локальные дисковые пространства используют стандартные серверы с локально подключенными дисками для создания программно-определяемого хранилища с высоким уровнем доступности и масштабируемости, причем стоимость такого хранилища значительно ниже стоимости традиционных массивов SAN или NAS. Ее конвергенция или архитектура с поддержкой технологии Hyper-in значительно упрощает закупку и развертывание, в то время как такие функции, как кэширование, уровни хранилища и очисткиное кодирование, а также новейшие нововведения оборудования, такие как сетевые подключения RDMA и накопители NVMe, обеспечивают непревзойденную эффективность и производительность.

Локальные дисковые пространства входит в сборки Windows Server 2019 Datacenter, Windows Server 2016 Datacenter и [Windows Server Insider Preview](https://insider.windows.com/for-business-getting-started-server/).

Дополнительные сведения о других приложениях дисковых пространств, таких как общие кластеры SAS и изолированные серверы, см. в разделе [Обзор дисковых пространств](overview.md). Если вы ищете сведения об использовании дисковых пространств на компьютере с Windows 10, см. раздел [дисковые пространства в Windows 10](https://support.microsoft.com/help/12438/windows-10-storage-spaces).

| Описание | Документация |
|--|--|
| **Общие сведения**<br><ul><li>Обзор (вы здесь)</li><li>[Общие сведения о кэше](understand-the-cache.md)</li><li>[Отказоустойчивость и эффективность хранения](storage-spaces-fault-tolerance.md)<li>[Рекомендации по симметрии диска](drive-symmetry-considerations.md)</li><li>[Принцип работы и отслеживание повторной синхронизации хранилища](understand-storage-resync.md)</li><li>[Общие сведения о кворуме кластеров и пулов](understand-quorum.md)</li><li>[Наборы кластеров](cluster-sets.md)</li> | **План**<br><ul><li>[Требования к оборудованию](storage-spaces-direct-hardware-requirements.md)</li><li>[Использование кэша чтения в памяти CSV](csv-cache.md)</li><li>[Выбор дисков](choosing-drives.md)</li><li>[Планирование томов](plan-volumes.md)</li><li>[Использование кластеров гостевых виртуальных машин](storage-spaces-direct-in-vm.md)</li><li>[Аварийное восстановление](storage-spaces-direct-disaster-recovery.md)</li> |
| **Развертывание**<br><ul><li>[Развертывание локальных дисковых пространств](deploy-storage-spaces-direct.md)</li><li>[Создание томов](create-volumes.md)</li><li>[Вложенная устойчивость](nested-resiliency.md)</li><li>[Настройка кворума](../../failover-clustering/manage-cluster-quorum.md)</li><li>[Обновление кластера Локальных дисковых пространств в Windows Server 2019](upgrade-storage-spaces-direct-to-windows-server-2019.md)</li><li>[Общие сведения о постоянной памяти и ее развертывании](deploy-pmem.md)</li> | **Управление**<br><ul><li>[Управление с помощью Windows Admin Center](../../manage/windows-admin-center/use/manage-hyper-converged.md)</li><li>[Добавление серверов или дисков](add-nodes.md)</li><li>[Перевод сервера в автономный режим для обслуживания](maintain-servers.md)</li><li>[Удаление серверов](remove-servers.md)</li><li>[Увеличение размеров томов](resize-volumes.md)</li><li>[Удаление томов](delete-volumes.md)</li><li>[Обновление встроенного ПО дисков](../update-firmware.md)</li><li>[Журнал производительности](performance-history.md)</li><li>[Разграничение выделения томов](delimit-volume-allocation.md)</li><li>[Использование Azure Monitor в кластере с поддержкой технологии Hyper-in](configure-azure-monitor.md)</li> |
| **Устранение неполадок**<br><ul><li>[Сценарии устранения неполадок](troubleshooting-storage-spaces.md)</li><li>[Устранение неполадок работоспособности и рабочих состояний](storage-spaces-states.md)</li><li>[Сбор диагностических данных с помощью Локальные дисковые пространства](data-collection.md)</li><li>[Управление работоспособностью памяти класса хранилища](Storage-class-memory-health.md)</li> | **Последние записи в блоге**<br><ul><li>[13 700 000 операций ввода-вывода с Локальные дисковые пространства: Новая запись отрасли для инфраструктуры с технологией Hyper-in](https://techcommunity.microsoft.com/t5/storage-at-microsoft/the-new-hci-industry-record-13-7-million-iops-with-windows/ba-p/428314)</li><li>[Инфраструктура с технологией Hyper-in в Windows Server 2019 — отсчет времени отсчета начинается прямо сейчас!](https://techcommunity.microsoft.com/t5/storage-at-microsoft/bg-p/FileCAB)</li><li>[Пять извещений от конференции Windows Server](https://techcommunity.microsoft.com/t5/storage-at-microsoft/bg-p/FileCAB)</li><li>[10 000 Локальные дисковые пространства кластеры и подсчет...](https://techcommunity.microsoft.com/t5/storage-at-microsoft/storage-spaces-direct-10-000-clusters-and-counting/ba-p/428185)</li></ul> |

## <a name="videos"></a>Видео

**Краткий обзор видео (5 минут)**

> [!Video https://www.youtube-nocookie.com/embed/raeUiNtMk0E]

**Локальные дисковые пространства в Microsoft Ignite 2018 (1 час)**

> [!Video https://www.youtube-nocookie.com/embed/5kaUiW3qo30]

**Локальные дисковые пространства в Microsoft Ignite 2017 (1 час)**

> [!Video https://www.youtube-nocookie.com/embed/YDr2sqNB-3c]

**Событие запуска в Microsoft Ignite 2016 (1 час)**

> [!Video https://www.youtube-nocookie.com/embed/LK2ViRGbWs]

## <a name="key-benefits"></a>Основные преимущества

| Изображение | Описание |
|--|--|
| ![Простота](media/storage-spaces-direct-in-windows-server-2016/simplicity-icon.png) | **Простоты.** Создать кластер локальных дисковых пространств на основе стандартных серверов с ОС Windows Server 2016 можно меньше чем за 15 минут. Пользователи System Center могут выполнить развертывание, установив один флажок. |
| ![Непревзойденная производительность](media/storage-spaces-direct-in-windows-server-2016/performance-icon.png) | **Непревзойденная производительность.** Как при использовании только флэш-памяти, так и при использовании гибридных носителей локальные дисковые пространства позволяют обеспечить [скорость ввода-вывода более 150 000 операций в секунду в смешанном режиме и более 4000 операций в секунду в произвольном режиме на сервер](https://techcommunity.microsoft.com/t5/storage-at-microsoft/bg-p/FileCAB) со стабильно низкой задержкой. Это достигается благодаря архитектуре со встроенной низкоуровневой оболочкой, встроенному кэшу чтения и записи и поддержке передовых дисков NVMe, подключаемых непосредственно к шине PCIe. |
| ![Отказоустойчивость](media/storage-spaces-direct-in-windows-server-2016/fault-tolerance-icon.png) | **Отказоустойчивость.** Встроенные средства отказоустойчивости обрабатывают сбои дисков, серверов или компонентов, обеспечивая непрерывную доступность. В более масштабных развертываниях можно также настроить [отказоустойчивость шасси и стоек](../../failover-clustering/fault-domains.md). При сбое оборудования просто отключите его: программное обеспечение восстановит работоспособность самостоятельно, без выполнения сложных действий по управлению. |
| ![Эффективность ресурсов](media/storage-spaces-direct-in-windows-server-2016/efficiency-icon.png) | **Эффективность ресурсов.** Помехоустойчивое кодирование повышает экономичность хранения в 2,4 раза, а уникальные инновации, такие как локальные коды реконструкции и уровни ReFS в режиме реального времени, позволяют распространить эти преимущества на жесткие диски и смешанные (холодные и горячие) рабочие нагрузки. При этом снижается загрузка ЦП, и ресурсы высвобождаются для наиболее важной задачи — выполнения виртуальных машин. |
| ![Управляемость](media/storage-spaces-direct-in-windows-server-2016/manageability-icon.png) | **Управляемость**. Используйте [средства управления качеством обслуживания хранилища](../storage-qos/storage-qos-overview.md), чтобы контролировать работу наиболее загруженных виртуальных машин с помощью минимальных и максимальных значений скорости ввода-вывода на виртуальную машину. [Служба работоспособности](../../failover-clustering/health-service-overview.md) предоставляет встроенные возможности непрерывного мониторинга и оповещения, а новые интерфейсы API позволяют легко собирать расширенные метрики производительности и емкости в масштабе всего кластера. |
| ![Масштабируемость](media/storage-spaces-direct-in-windows-server-2016/scalability-icon.png) | **Масштабируемость**. Поддерживается масштабирование до 16 серверов и более чем 400 дисков, что позволяет получать объем хранилища в 1 петабайт (1000 терабайт) на кластер. Чтобы осуществить масштабирование, просто добавьте диски или серверы. Локальные дисковые пространства автоматически подключат новые диски и начнут использовать их. Эффективность и производительность хранилища повышают предсказуемость при масштабировании. |

## <a name="deployment-options"></a>Параметры развертывания

Локальные дисковые пространства предусматривают два разных варианта развертывания.

### <a name="converged"></a>Схождение выполнено

**хранение и вычисление в отдельных кластерах.** При конвергентном развертывании, также известном как дезагрегированное, масштабируемый файловый сервер (SoFS) размещается поверх локальных дисковых пространств для предоставления подключенного к сети хранилища посредством общих папок SMB3. Это позволяет масштабировать вычислительные ресурсы и рабочие нагрузки независимо от кластера хранилища, особенно в масштабных развертываниях, например Hyper-V IaaS (инфраструктура как услуга), для поставщиков услуг и крупных предприятий.

![Дисковые пространства прямого подключения обслуживают хранилище с помощью функции масштабирования файлового сервера в виртуальные машины Hyper-V на другом сервере или кластере](media/storage-spaces-direct-in-windows-server-2016/converged-minimal.png)

### <a name="hyper-converged"></a>Гиперконвергентные

**Один кластер для вычислений и хранения данных.** При гиперконвергентном развертывании виртуальные машины Hyper-V или базы данных SQL Server работают непосредственно на серверах, предоставляющих хранилище, и сохраняют файлы в локальных томах. Это устраняет необходимость в настройке доступа к файловым серверам и разрешений. Кроме того, снижается стоимость оборудования при развертывании на малых и средних предприятиях, а также в удаленных офисах и филиалах. См. раздел [Deploy Локальные дисковые пространства](deploy-storage-spaces-direct.md).

![Дисковые пространства прямого подключения обслуживают хранилище в виртуальных машинах Hyper-V на одном и том же кластере](media/storage-spaces-direct-in-windows-server-2016/hyper-converged-minimal.png)

## <a name="how-it-works"></a>Принцип работы

Локальные дисковые пространства являются развитием дисковых пространств, впервые представленных в Windows Server 2012. В них используется множество существующих возможностей Windows Server, таких как отказоустойчивая кластеризация, файловая система CSV, протокол SMB3 и, конечно, дисковые пространства. В них также были реализованы новые технологии, в первую очередь шина Software Storage Bus.

Ниже представлен обзор стека локальных дисковых пространств.

![Стек локальных дисковых пространств](media/storage-spaces-direct-in-windows-server-2016/converged-full-stack.png)

**Оборудование для сетевого взаимодействия.** Для обмена данными между серверами локальные дисковые пространства используют протокол SMB3, включая SMB Direct и SMB Multichannel, работающий через Ethernet. Мы настоятельно рекомендуем использовать Ethernet со скоростью передачи данных более 10 Гбит/с и удаленным доступом к памяти (RDMA) — iWARP или RoCE.

**Оборудование хранилища.** От 2 до 16 серверов с локально подключенными дисками SATA, SAS или NVMe. Каждый сервер должен иметь по крайней мере 2 твердотельных накопителя и 4 дополнительных диска. Устройства SATA и SAS должны располагаться за адаптером шины (HBA) и расширителем SAS. Мы настоятельно рекомендуем использовать тщательно спроектированные и протестированные платформы от наших партнеров (ожидаются в ближайшее время).

**Отказоустойчивая кластеризация.** Встроенная функция кластеризации Windows Server используется для подключения серверов.

**Шина хранилища программного обеспечения.** Шина Software Storage Bus — это новая технология, представленная в локальных дисковых пространствах. Она охватывает весь кластер и создает программно-определяемую структуру хранения, в которой каждый сервер имеет доступ к локальным дискам любого другого сервера. Это можно рассматривать как замену дорогостоящим и ограниченным в своих возможностях подключениям Fibre Channel или Shared SAS.

**Кэш уровня шины хранилища.** Шина Software Storage Bus динамически связывает самые быстрые диски (например, SSD) с более медленными дисками (например, жесткими дисками) для обеспечения кэширования при чтении и записи на стороне сервера с целью ускорить ввод-вывод и повысить пропускную способность.

**Пул носителей.** Набор дисков, которые образуют основу для дисковых пространств, называется пулом носителей. Он создается автоматически, и все подходящие диски обнаруживаются и добавляются в него также автоматически. Мы настоятельно рекомендуем использовать один пул носителей в каждом кластере с параметрами по умолчанию. Прочитайте раздел [Глубокое погружение в пул носителей](https://techcommunity.microsoft.com/t5/storage-at-microsoft/deep-dive-the-storage-pool-in-storage-spaces-direct/ba-p/425959), чтобы узнать больше.

**Дисковые пространства.** Дисковые пространства обеспечивают отказоустойчивость виртуальных дисков с помощью [зеркального отображения, очистки кодирования или и того и другого](storage-spaces-fault-tolerance.md). Их можно представить как распределенный программно-определяемый массив RAID на основе дисков в пуле. В локальных дисковых пространствах виртуальные диски обычно устойчивы к одновременному сбою двух дисков или серверов (то есть применяется трехстороннее зеркалирование, при котором каждая копия данных размещается на отдельном сервере), хотя также доступна отказоустойчивость на уровне шасси или стоек.

**Устойчивая файловая система (ReFS).** ReFS — это файловая система с превосходными возможностями, предназначенная специально для виртуализации. Она позволяет существенно ускорить операции с файлами VHDX, такие как создание, расширение и объединение контрольных точек, а также имеет встроенные средства проверки контрольной суммы для обнаружения и исправления ошибок на уровне отдельных битов. В ней также реализовано переключение уровней в режиме реального времени, позволяющее переносить данные между "активными" и "пассивными" уровнями хранения в режиме реального времени в соответствии с интенсивностью использования.

**Общие тома кластера.** Файловая система CSV объединяет все тома ReFS в единое пространство имен, доступное с любого сервера, так что для каждого сервера все тома представляются как локально подключенные.

**масштабируемый файловый сервер.** Этот последний уровень необходим только в конвергентных развертываниях. Он обеспечивает удаленный доступ к файлам со стороны клиентов, например другого кластера Hyper-V, через сеть по протоколу SMB3. Таким образом локальные дисковые пространства по сути превращаются в подключенное к сети хранилище (NAS).

## <a name="customer-stories"></a>Истории клиентов

Существует [более 10 000 кластеров по](https://techcommunity.microsoft.com/t5/storage-at-microsoft/storage-spaces-direct-10-000-clusters-and-counting/ba-p/428185) всему миру, где работают Локальные дисковые пространства. Организации всех размеров, от малых предприятий, развертывающих всего два узла, до крупных предприятий и правительственных учреждений, развертывающих сотни узлов, зависят от Локальные дисковые пространства для критически важных приложений и инфраструктуры.

Посетите [Microsoft.com/HCI](https://www.microsoft.com/hci) , чтобы прочитать свои истории:

[![Сетка логотипов клиента](media/storage-spaces-direct-in-windows-server-2016/customer-stories.png)](https://www.microsoft.com/hci)

## <a name="management-tools"></a>Средства управления

Для управления и (или) мониторинга Локальные дисковые пространства можно использовать следующие средства.

| Имя | Графический или Командная строка? | Оплачивается или включается? |
|-----------------|----------------------------|-------------------|
| [Windows Admin Center](../../manage/windows-admin-center/overview.md);     | Графический    | Включено |
| Диспетчер сервера & диспетчер отказоустойчивости кластеров                                 | Графический    | Включено |
| Windows PowerShell                                                        | Командная строка | Включено |
| [System Center Virtual Machine Manager (SCVMM)](/system-center/vmm/s2d?view=sc-vmm-2019) <br>& [Operations Manager (SCOM)](https://www.microsoft.com/download/details.aspx?id=54700) | Графический    | Платный     |

## <a name="get-started"></a>Начало работы

Попробуйте локальные дисковые пространства [в Microsoft Azure](https://techcommunity.microsoft.com/t5/storage-at-microsoft/bg-p/FileCAB) или скачайте [ознакомительную версию Windows Server](https://go.microsoft.com/fwlink/?linkid=842602) с лицензией на 180 дней.

## <a name="additional-references"></a>Дополнительные ссылки

- [Отказоустойчивость и эффективность хранения](storage-spaces-fault-tolerance.md)
- [Реплика хранилища](../storage-replica/storage-replica-overview.md)
- [Блог о хранилище в блоге Майкрософт](https://techcommunity.microsoft.com/t5/storage-at-microsoft/bg-p/FileCAB)
- [Пропускная способность дисковых пространств прямого подключения с iWARP](https://techcommunity.microsoft.com/t5/storage-at-microsoft/bg-p/FileCAB) (блог TechNet)
- [Новые возможности отказоустойчивой кластеризации в Windows Server 2016](../../failover-clustering/whats-new-in-failover-clustering.md)
- [Качество обслуживания хранилища](../storage-qos/storage-qos-overview.md)
- [Поддержка Windows для ИТ-специалистов](https://www.microsoft.com/itpro/windows/support)

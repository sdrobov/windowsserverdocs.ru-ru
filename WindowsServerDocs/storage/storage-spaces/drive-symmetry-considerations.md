---
title: Рекомендации по симметрии дисков для Локальные дисковые пространства
ms.author: cosdar
manager: eldenc
ms.technology: storage-spaces
ms.topic: article
author: cosmosdarwin
ms.date: 10/08/2018
ms.localizationpriority: medium
ms.openlocfilehash: b06d69c020ea38a2fb9f23df2cfd9cd4191ae315
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2020
ms.locfileid: "80857557"
---
# <a name="drive-symmetry-considerations-for-storage-spaces-direct"></a>Рекомендации по симметрии дисков для Локальные дисковые пространства 

> Область применения: Windows Server 2019, Windows Server 2016

[Локальные дисковые пространства](storage-spaces-direct-overview.md) работает лучше, если на каждом сервере есть только те же диски.

На практике мы понимаем, что это не всегда целесообразно: Локальные дисковые пространства предназначен для работы в течение нескольких лет и для масштабирования по мере роста потребностей Организации. Сегодня вы можете купить жесткие диски Spacious объемом 3 ТБ; в следующий год может оказаться невозможным найти небольшие. Поэтому поддерживается некоторое количество совместного использования.

В этом разделе объясняются ограничения и приводятся примеры поддерживаемых и неподдерживаемых конфигураций.

## <a name="constraints"></a>Ограничения

### <a name="type"></a>Тип

Все серверы должны иметь одинаковые [типы дисков](choosing-drives.md#drive-types).

Например, если на одном сервере имеется NVMe *, у них должно быть* nvme.

### <a name="number"></a>Номер

Все серверы должны иметь одинаковое количество дисков для каждого типа.

Например, если один сервер имеет шесть твердотельных накопителей, *все* они должны иметь шесть твердотельных накопителей.

   > [!NOTE]
   > Количество дисков может временно различаться во время сбоев, а также при добавлении или удалении дисков.

### <a name="model"></a>Модель

При возможности рекомендуется использовать диски одной и той же модели и версии встроенного по. Если это невозможно, тщательно выбирайте диски, которые похожи на возможные. Мы не хотим, чтобы совместное использование дисков одного типа с четко отличающимися характеристиками производительности или ендуранце (если только один кэш не является кэшем, а другой — емкость), так как Локальные дисковые пространства распределяет операции ввода-вывода равномерно и не зависит от модели.

   > [!NOTE]
   > Можно сочетать и сопоставлять аналогичные диски SATA и SAS.

### <a name="size"></a>Размер

При возможности рекомендуется использовать диски одинакового размера. Использование дисков емкости разного размера может привести к непригодности к использованию емкости, а использование дисков кэша разного размера может не повысить производительность кэша. Дополнительные сведения см. в следующем разделе.

   > [!WARNING]
   > Разные размеры дисков емкости на серверах могут привести к получению потерянной емкости.

## <a name="understand-capacity-imbalance"></a>Понимание: дисбаланс емкости

Локальные дисковые пространства надежна для неравномерного распределения емкости между дисками и между серверами. Даже если дисбаланс имеет серьезное значение, все будет продолжать работать. Однако в зависимости от нескольких факторов емкость, недоступная на всех серверах, может быть непригодна для использования.

Чтобы узнать, почему это происходит, рассмотрим упрощенную иллюстрацию ниже. Каждое цветное поле представляет одну копию зеркальных данных. Например, поля, помеченные как, "и" ", представляют собой три копии одних и тех же данных. Для учета отказоустойчивости сервера эти копии *должны* храниться на разных серверах.

### <a name="stranded-capacity"></a>Потерянная емкость

По мере прорисовки сервер 1 (10 ТБ) и сервер 2 (10 ТБ) заполнены. Сервер 3 имеет больше дисков, поэтому его общая емкость больше (15 ТБ). Однако для хранения более трех данных зеркального отображения на сервере 3 потребуются копии на сервере 1 и сервере 2, которые уже заполнены. Оставшиеся объемы в 5 ТБ на сервере 3 не могут быть использованы — это *"потерянная"* емкость.

![Трехстороннее зеркало, три сервера, потерянная емкость](media/drive-symmetry-considerations/Size-Asymmetry-3N-Stranded.png)

### <a name="optimal-placement"></a>Оптимальное размещение

И наоборот, при наличии четырех серверов объемом 10 ТБ, 10 ТБ, 10 ТБ и 15 ТБ, а также трехуровневой устойчивости зеркального *отражения можно правильно* разместить копии, используя всю доступную емкость. Всякий раз, когда это возможно, распределитель Локальные дисковые пространства найдет и будет использовать оптимальное размещение, не освобождая пропускную способность.

![Трехстороннее зеркало, четыре сервера, без потерянной емкости](media/drive-symmetry-considerations/Size-Asymmetry-4N-No-Stranded.png)

Количество серверов, устойчивость, серьезность дисбаланса мощности и другие факторы влияют на наличие потерянной емкости. **Наиболее разумное правило состоит в том, что предполагается, что только доступная мощность на каждом сервере гарантированно может быть использована.**

## <a name="understand-cache-imbalance"></a>Понимание: дисбаланс кэша

Локальные дисковые пространства надежна для неравномерного распределения кэша между дисками и между серверами. Даже если дисбаланс имеет серьезное значение, все будет продолжать работать. Более того, Локальные дисковые пространства всегда использует весь доступный кэш полностью.

Однако использование дисков кэша разного размера может повлечь за собой неравномерное повышение производительности кэша: только операции ввода-вывода для [привязки к дискам](understand-the-cache.md#server-side-architecture) с большими дисками кэша могут улучшить производительность. Локальные дисковые пространства выполняет равномерное распределение операций ввода-вывода между привязками и не зависит от соотношения между кэшем и емкостью.

![Дисбаланс кэша](media/drive-symmetry-considerations/Cache-Asymmetry.png)

   > [!TIP]
   > Дополнительные сведения о привязках кэша см. в разделе [Основные сведения о кэше](understand-the-cache.md) .

## <a name="example-configurations"></a>Примеры конфигураций

Ниже приведены некоторые поддерживаемые и неподдерживаемые конфигурации.

### <a name="supported-supported-different-models-between-servers"></a>![поддерживаемое количество](media/drive-symmetry-considerations/supported.png) Поддерживается: разные модели между серверами

Первые два сервера используют модель NVMe "X", но третий сервер использует модель NVMe "Z", которая очень похожа.

| Сервер 1                    | Сервер 2                    | Сервер 3                    |
|-----------------------------|-----------------------------|-----------------------------|
| 2 x модель NVMe X (кэш)    | 2 x модель NVMe X (кэш)    | 2 x модель NVMe Z (кэш)    |
| 10-х ТВЕРДОТЕЛЬная модель Y (емкость) | 10-х ТВЕРДОТЕЛЬная модель Y (емкость) | 10-х ТВЕРДОТЕЛЬная модель Y (емкость) |

Поддерживается.

### <a name="supported-supported-different-models-within-server"></a>![поддерживаемое количество](media/drive-symmetry-considerations/supported.png) Поддерживается: разные модели на сервере

Каждый сервер использует несколько различных моделей жестких дисков «Y» и «Z», которые очень похожи. На каждом сервере имеется 10 жестких дисков.

| Сервер 1                   | Сервер 2                   | Сервер 3                   |
|----------------------------|----------------------------|----------------------------|
| 2-х модель SSD X (кэш)    | 2-х модель SSD X (кэш)    | 2-х модель SSD X (кэш)    |
| 7-ДИСКовая модель по оси Y (емкость) | 5-х жестких дисков, модель Y (емкость) | Модель жестких дисков с 1 x по оси Y (емкость) |
| 3-ДИСКОВая модель по оси Z (емкость) | 5-х жестких дисков модель Z (емкость) | 9-ДИСКовая модель по оси Z (емкость) |

Поддерживается.

### <a name="supported-supported-different-sizes-across-servers"></a>![поддерживаемое количество](media/drive-symmetry-considerations/supported.png) Поддерживается: разные размеры на серверах

Первые два сервера используют жесткий диск объемом 4 ТБ, но третий сервер использует очень схожий жесткий диск объемом 6 ТБ.

| Сервер 1                | Сервер 2                | Сервер 3                |
|-------------------------|-------------------------|-------------------------|
| 2 x 800 ГБ NVMe (кэш) | 2 x 800 ГБ NVMe (кэш) | 2 x 800 ГБ NVMe (кэш) |
| 4 жестких диска x 4 ТБ (емкость) | 4 жестких диска x 4 ТБ (емкость) | 4 жестких диска x 6 ТБ (емкость) |

Это поддерживается, хотя это приведет к получению потерянной емкости.

### <a name="supported-supported-different-sizes-within-server"></a>![поддерживаемое количество](media/drive-symmetry-considerations/supported.png) Поддерживается: разные размеры на сервере

Каждый сервер использует различные сочетания 1,2 ТБ и очень похожих твердотельных накопителей 1,6 ТБ. На каждом сервере имеется 4 общего SSD.

| Сервер 1                 | Сервер 2                 | Сервер 3                 |
|--------------------------|--------------------------|--------------------------|
| твердотельный SSD 3 x 1,2 ТБ (кэш)   | твердотельный SSD 2 x 1,2 ТБ (кэш)   | Твердотельный накопитель объемом 4 x 1,2 ТБ (кэш)   |
| SSD 1 x 1,6 ТБ (кэш)   | твердотельный SSD 2 x 1,6 ТБ (кэш)   | -                        |
| жесткий диск объемом 20 x 4 ТБ (емкость) | жесткий диск объемом 20 x 4 ТБ (емкость) | жесткий диск объемом 20 x 4 ТБ (емкость) |

Поддерживается.

### <a name="unsupported-not-supported-different-types-of-drives-across-servers"></a>![неподдерживаемые](media/drive-symmetry-considerations/unsupported.png) Не поддерживается: разные типы дисков для разных серверов

Сервер 1 имеет NVMe, но другие — нет.

| Сервер 1            | Сервер 2            | Сервер 3            |
|---------------------|---------------------|---------------------|
| 6 x NVMe (кэш)    | -                   | -                   |
| -                   | 6-х SSD (кэш)     | 6-х SSD (кэш)     |
| 18-х жестких дисков (емкость) | 18-х жестких дисков (емкость) | 18-х жестких дисков (емкость) |

Это не поддерживается. Типы дисков должны быть одинаковыми на каждом сервере.

### <a name="unsupported-not-supported-different-number-of-each-type-across-servers"></a>![неподдерживаемые](media/drive-symmetry-considerations/unsupported.png) Не поддерживается: разное количество каждого типа на разных серверах

Сервер 3 имеет больше дисков, чем другие.

| Сервер 1            | Сервер 2            | Сервер 3            |
|---------------------|---------------------|---------------------|
| 2 x NVMe (кэш)    | 2 x NVMe (кэш)    | 4 x NVMe (кэш)    |
| 10 жестких дисков (емкость) | 10 жестких дисков (емкость) | 20 жестких дисков (емкость) |

Это не поддерживается. Количество дисков каждого типа должно быть одинаковым на каждом сервере.

### <a name="unsupported-not-supported-only-hdd-drives"></a>![неподдерживаемые](media/drive-symmetry-considerations/unsupported.png) Не поддерживается: только накопители на жестких дисках

На всех серверах подключены только накопители на жестких дисках.

|Сервер 1|Сервер 2|Сервер 3|
|-|-|-| 
|18-х жестких дисков (емкость) |18-х жестких дисков (емкость)|18-х жестких дисков (емкость)|

Это не поддерживается. Необходимо добавить не менее двух дисков кэша (NvME или SSD), подключенных к каждому из серверов.

## <a name="summary"></a>Сводка

Итак, каждый сервер в кластере должен иметь одинаковые типы дисков и одинаковое число каждого типа. При необходимости поддерживаются модели накопителей и размеры дисков с сочетанием и размерами.

| Противоречит                               |               |
|------------------------------------------|---------------|
| Диски одного типа на каждом сервере     | **Обязательно**  |
| Одинаковое количество каждого типа на каждом сервере | **Обязательно**  |
| Модели дисков на каждом сервере        | Рекомендуем   |
| Один и тот же размер диска на каждом сервере         | Рекомендуем   |

## <a name="see-also"></a>См. также:

- [Требования к оборудованию Локальные дисковые пространства](storage-spaces-direct-hardware-requirements.md)
- [Обзор Локальные дисковые пространства](storage-spaces-direct-overview.md)
